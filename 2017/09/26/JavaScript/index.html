<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="tfZo1i97m_T6M5Rerj-Z2tCzNMlH8fq8JOMO75-Zkfc" />







  <meta name="baidu-site-verification" content="LQdYY6eYR3" />







  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="JavaScript,JS," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="数据类型6种数据类型object对象FunctionArrayDatanumberstringbooleannullundefined隐式转换+/-12345num - 0; //num作为数字来运算num + &apos;&apos;; //num数字作字符处理&quot;37&quot; - 7 //30&quot;37&quot; + 7 //&quot;377&quot; 等于 == 和 严格等于 === 等于  12345“1.23” == 1.230 == fal">
<meta name="keywords" content="JavaScript,JS">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript">
<meta property="og:url" content="http://kangqiao.github.io/2017/09/26/JavaScript/index.html">
<meta property="og:site_name" content="ZhaoPan">
<meta property="og:description" content="数据类型6种数据类型object对象FunctionArrayDatanumberstringbooleannullundefined隐式转换+/-12345num - 0; //num作为数字来运算num + &apos;&apos;; //num数字作字符处理&quot;37&quot; - 7 //30&quot;37&quot; + 7 //&quot;377&quot; 等于 == 和 严格等于 === 等于  12345“1.23” == 1.230 == fal">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://kityminder-img.gz.bcebos.com/bafaa34ae89c96aea99949e83c79d64365e8b721">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/3877962-81f6d095f48ed6dd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/3877962-568a72e297d75aeb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/3877962-37d17481b52e9489.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://pclib.github.io/safari/program/javascript-the-definitive-guide-cn/OEBPS/Images/image00755.jpeg">
<meta property="og:image" content="http://pclib.github.io/safari/program/javascript-the-definitive-guide-cn/OEBPS/Images/image00756.jpeg">
<meta property="og:image" content="http://pclib.github.io/safari/program/javascript-the-definitive-guide-cn/OEBPS/Images/image00757.jpeg">
<meta property="og:image" content="http://pclib.github.io/safari/program/javascript-the-definitive-guide-cn/OEBPS/Images/image00758.jpeg">
<meta property="og:image" content="http://pclib.github.io/safari/program/javascript-the-definitive-guide-cn/OEBPS/Images/image00759.jpeg">
<meta property="og:image" content="http://pclib.github.io/safari/program/javascript-the-definitive-guide-cn/OEBPS/Images/image00760.jpeg">
<meta property="og:image" content="http://img.blog.csdn.net/20170202215754180?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYTQwOTA1MTk4Nw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center">
<meta property="og:updated_time" content="2017-09-27T03:55:11.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScript">
<meta name="twitter:description" content="数据类型6种数据类型object对象FunctionArrayDatanumberstringbooleannullundefined隐式转换+/-12345num - 0; //num作为数字来运算num + &apos;&apos;; //num数字作字符处理&quot;37&quot; - 7 //30&quot;37&quot; + 7 //&quot;377&quot; 等于 == 和 严格等于 === 等于  12345“1.23” == 1.230 == fal">
<meta name="twitter:image" content="http://kityminder-img.gz.bcebos.com/bafaa34ae89c96aea99949e83c79d64365e8b721">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://kangqiao.github.io/2017/09/26/JavaScript/"/>





  <title>JavaScript | ZhaoPan</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ZhaoPan</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kangqiao.github.io/2017/09/26/JavaScript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhaopan">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/7248615">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZhaoPan">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JavaScript</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-26T18:46:59+08:00">
                2017-09-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="6种数据类型"><a href="#6种数据类型" class="headerlink" title="6种数据类型"></a>6种数据类型</h3><h4 id="object对象"><a href="#object对象" class="headerlink" title="object对象"></a>object对象</h4><h5 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h5><h5 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h5><h5 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h5><h4 id="number"><a href="#number" class="headerlink" title="number"></a>number</h4><h4 id="string"><a href="#string" class="headerlink" title="string"></a>string</h4><h4 id="boolean"><a href="#boolean" class="headerlink" title="boolean"></a>boolean</h4><h4 id="null"><a href="#null" class="headerlink" title="null"></a>null</h4><h4 id="undefined"><a href="#undefined" class="headerlink" title="undefined"></a>undefined</h4><h3 id="隐式转换"><a href="#隐式转换" class="headerlink" title="隐式转换"></a>隐式转换</h3><h4 id=""><a href="#" class="headerlink" title="+/-"></a>+/-</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">num - <span class="number">0</span>; <span class="comment">//num作为数字来运算</span></div><div class="line">num + <span class="string">''</span>; <span class="comment">//num数字作字符处理</span></div><div class="line"></div><div class="line"><span class="string">"37"</span> - <span class="number">7</span> <span class="comment">//30</span></div><div class="line"><span class="string">"37"</span> + <span class="number">7</span> <span class="comment">//"377"</span></div></pre></td></tr></table></figure>
<h4 id="等于-和-严格等于"><a href="#等于-和-严格等于" class="headerlink" title="等于 == 和 严格等于 ==="></a>等于 == 和 严格等于 ===</h4><p><strong> 等于 </strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">“1.23” == 1.23</div><div class="line">0 == false</div><div class="line">null == undefined</div><div class="line">new Object() == new Object()</div><div class="line">[1, 2] == [1, 2]</div></pre></td></tr></table></figure>
<ul>
<li>类型相同，同===</li>
<li>类型不同，尝试类型转换和比较:<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">null == undefined 相等</div><div class="line">number == string 转number     1 == “1.0&quot; // true</div><div class="line">boolean == ?  转number       1 == true  // true</div><div class="line">object == number | string 尝试对象转为基本类型  new String(&apos;hi&apos;) == ‘hi’ // true</div><div class="line">其它：false</div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong> 严格等于 </strong><br>类型不同，返回false<br>类型相同<br>NaN ≠ NaN<br>new Object ≠ new Object<br>null === null<br>undefined === undefined</p>
<h3 id="类型检测"><a href="#类型检测" class="headerlink" title="类型检测"></a>类型检测</h3><p>typeof<br>适合基本类型及function检测，遇到null失效。</p>
<p>[[Class]]<br>通过{}.toString拿到，适合内置对象和基元类型，遇到null和undefined失效(IE678等返回[object Object])。</p>
<p>instanceof<br>适合自定义对象，也可以用来检测原生对象，在不同iframe和window间检测时失效。</p>
<p>当基本类型使用时, 会临时转换成包装类型对象, 用完后会销毁这个对象.</p>
<p>例:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var a = &quot;string&quot;;</div><div class="line">alert(a.length);</div><div class="line">//把变量a包装成字体串对象, 并为它增加属性t=3;</div><div class="line">a.t = 3</div><div class="line">//当使用完变量a后, 即释放了包装对象, 所以a.t为undefined.</div><div class="line">alert(a.t) // undefined</div></pre></td></tr></table></figure></p>
<h4 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">typeof 100 === “number”</div><div class="line">typeof true === “boolean”</div><div class="line">typeof function () &#123;&#125; === “function”</div><div class="line"></div><div class="line">typeof(undefined) ) === “undefined”</div><div class="line">typeof(new Object() ) === “object”</div><div class="line">typeof( [1， 2] ) === “object”</div><div class="line">typeof(NaN ) === “number”</div><div class="line">typeof(null) === “object”</div><div class="line">typeof(&apos;string&apos;) === &quot;string&quot;</div></pre></td></tr></table></figure>
<h4 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h4><h4 id="Object-prototype-toString"><a href="#Object-prototype-toString" class="headerlink" title="Object.prototype.toString"></a>Object.prototype.toString</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Object.prototype.toString.apply([]); === “[object Array]”;</div><div class="line">Object.prototype.toString.apply(function()&#123;&#125;); === “[object Function]”;</div><div class="line">Object.prototype.toString.apply(null); === “[object Null]”</div><div class="line">Object.prototype.toString.apply(undefined); === “[object Undefined]”</div><div class="line"></div><div class="line">IE6/7/8 Object.prototype.toString.apply(null) 返回”[object Object]”</div></pre></td></tr></table></figure>
<h4 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h4><h4 id="duck-type"><a href="#duck-type" class="headerlink" title="duck type"></a>duck type</h4><h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><h4 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h4><h4 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h4><p>删除对象的属性</p>
<p>只有对象的configurable为true时, 才可以delete掉对象的属性.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var obj = &#123;&#125;;</div><div class="line">Object.defineProperty(obj, &apos;x&apos;, &#123;</div><div class="line">	configurable : false, </div><div class="line">	value : 1</div><div class="line">&#125;);</div><div class="line">delete obj.x; // false</div><div class="line">obj.x;            // 1</div></pre></td></tr></table></figure></p>
<h4 id="in"><a href="#in" class="headerlink" title="in"></a>in</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">window.x = 1;</div><div class="line">‘x’ in window; // true</div></pre></td></tr></table></figure>
<h4 id="new"><a href="#new" class="headerlink" title="new"></a>new</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">Foo.prototype.x = <span class="number">1</span>;</div><div class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> Foo();</div><div class="line">obj.x;  <span class="comment">// 1</span></div><div class="line">obj.hasOwnProperty(<span class="string">'x'</span>); <span class="comment">// false</span></div><div class="line">obj.__proto__.hasOwnProperty(<span class="string">'x'</span>); <span class="comment">// true</span></div></pre></td></tr></table></figure>
<h4 id="this"><a href="#this" class="headerlink" title="this"></a>this</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>;  <span class="comment">// window (浏览器)</span></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    func : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">obj.func(); <span class="comment">// obj</span></div></pre></td></tr></table></figure>
<h4 id="void"><a href="#void" class="headerlink" title="void"></a>void</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> <span class="number">0</span>  <span class="comment">// undefined</span></div><div class="line"><span class="keyword">void</span>(<span class="number">0</span>) <span class="comment">// undefined</span></div></pre></td></tr></table></figure>
<h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line">obj.y = <span class="number">2</span>;</div><div class="line">obj.x = <span class="number">1</span>;</div></pre></td></tr></table></figure>
<p>javascript属性是可以动态添加的.</p>
<p>属性标签:</p>
<h4 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h4><p><strong> 获取属性描述信息 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(&#123;<span class="attr">pro</span> : <span class="literal">true</span>&#125;, <span class="string">'pro'</span>);</div><div class="line"><span class="comment">// Object &#123;value: true, writable: true, enumerable: true, configurable: true&#125;</span></div><div class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(&#123;<span class="attr">pro</span> : <span class="literal">true</span>&#125;, <span class="string">'a'</span>); <span class="comment">// undefined</span></div></pre></td></tr></table></figure></p>
<p><em>* 例子 </em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// cat: 对象, 'price': 属性名, &#123;&#125; 是属性的标签集</span></div><div class="line"><span class="built_in">Object</span>.defineProperty(cat, <span class="string">'price'</span>, &#123;<span class="attr">enumerable</span> : <span class="literal">false</span>, <span class="attr">value</span> : <span class="number">1000</span>&#125;);</div><div class="line">cat.propertyIsEnumerable(<span class="string">'price'</span>); <span class="comment">// false</span></div><div class="line">cat.hasOwnProperty(<span class="string">'price'</span>); <span class="comment">// true</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> (cat &amp;&amp; cat.legs) &#123;</div><div class="line">    cat.legs *= <span class="number">2</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (cat.legs != <span class="literal">undefined</span>) &#123;</div><div class="line">    <span class="comment">// !== undefined, or, !== null</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//严格不等于.</span></div><div class="line"><span class="keyword">if</span> (cat.legs !== <span class="literal">undefined</span>) &#123;</div><div class="line">    <span class="comment">// only if cat.legs is not undefined</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="enumerable"><a href="#enumerable" class="headerlink" title="enumerable"></a>enumerable</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o = &#123;<span class="attr">x</span> : <span class="number">1</span>, <span class="attr">y</span> : <span class="number">2</span>, <span class="attr">z</span> : <span class="number">3</span>&#125;;</div><div class="line"><span class="string">'toString'</span> <span class="keyword">in</span> o; <span class="comment">// true</span></div><div class="line">o.propertyIsEnumerable(<span class="string">'toString'</span>); <span class="comment">// false</span></div><div class="line"><span class="keyword">var</span> key;</div><div class="line"><span class="keyword">for</span> (key <span class="keyword">in</span> o) &#123;</div><div class="line">    <span class="built_in">console</span>.log(key); <span class="comment">// x, y, z</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(o);</div><div class="line">obj.a = <span class="number">4</span>;</div><div class="line"><span class="keyword">var</span> key;</div><div class="line"><span class="keyword">for</span> (key <span class="keyword">in</span> obj) &#123;</div><div class="line">    <span class="built_in">console</span>.log(key); <span class="comment">// a, x, y, z</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(o);</div><div class="line">obj.a = <span class="number">4</span>;</div><div class="line"><span class="keyword">var</span> key;</div><div class="line"><span class="keyword">for</span> (key <span class="keyword">in</span> obj) &#123;</div><div class="line">    <span class="comment">//仅显示对象的属性, 过滤掉原型上的属性</span></div><div class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</div><div class="line">        <span class="built_in">console</span>.log(key); <span class="comment">// a</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="configurable-writable"><a href="#configurable-writable" class="headerlink" title="configurable/writable"></a>configurable/writable</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o = &#123;&#125;;</div><div class="line"><span class="built_in">Object</span>.defineProperty(o, <span class="string">'x'</span>, &#123;<span class="attr">value</span> : <span class="number">1</span>&#125;); <span class="comment">// writable=false, configurable=false</span></div><div class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(o);</div><div class="line">obj.x; <span class="comment">// 1</span></div><div class="line">obj.x = <span class="number">200</span>;</div><div class="line">obj.x; <span class="comment">// still 1, can't change it</span></div><div class="line"></div><div class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">'x'</span>, &#123;<span class="attr">writable</span>:<span class="literal">true</span>, <span class="attr">configurable</span>:<span class="literal">true</span>, <span class="attr">value</span> : <span class="number">100</span>&#125;);</div><div class="line">obj.x; <span class="comment">// 100</span></div><div class="line">obj.x = <span class="number">500</span>;</div><div class="line">obj.x; <span class="comment">// 500</span></div></pre></td></tr></table></figure>
<h5 id="value"><a href="#value" class="headerlink" title="value"></a>value</h5><h5 id="自定义对象属性"><a href="#自定义对象属性" class="headerlink" title="自定义对象属性"></a>自定义对象属性</h5><p>defineproperty<br>defineProperties</p>
<p><strong> defineProperty自定义属性 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> person = &#123;&#125;;</div><div class="line"><span class="built_in">Object</span>.defineProperty(person, <span class="string">'name'</span>, &#123;</div><div class="line">    configurable : <span class="literal">false</span>,</div><div class="line">    writable : <span class="literal">false</span>,</div><div class="line">    enumerable : <span class="literal">true</span>,</div><div class="line">    value : <span class="string">"Bosn Ma"</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line">person.name; <span class="comment">// Bosn Ma</span></div><div class="line">person.name = <span class="number">1</span>;</div><div class="line">person.name; <span class="comment">// still Bosn Ma</span></div><div class="line"><span class="keyword">delete</span> person.name; <span class="comment">// false</span></div></pre></td></tr></table></figure></p>
<p><strong> 同时定义多个属性defineProperties </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.defineProperties(person, &#123;</div><div class="line">    title : &#123;<span class="attr">value</span> : <span class="string">'fe'</span>, <span class="attr">enumerable</span> : <span class="literal">true</span>&#125;,</div><div class="line">    corp : &#123;<span class="attr">value</span> : <span class="string">'BABA'</span>, <span class="attr">enumerable</span> : <span class="literal">true</span>&#125;,</div><div class="line">    salary : &#123;<span class="attr">value</span> : <span class="number">50000</span>, <span class="attr">enumerable</span> : <span class="literal">true</span>, <span class="attr">writable</span> : <span class="literal">true</span>&#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(person, <span class="string">'salary'</span>);</div><div class="line"><span class="comment">// Object &#123;value: 50000, writable: true, enumerable: true, configurable: false&#125;</span></div><div class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(person, <span class="string">'corp'</span>);</div><div class="line"><span class="comment">// Object &#123;value: "BABA", writable: false, enumerable: true, configurable: false&#125;</span></div></pre></td></tr></table></figure></p>
<h6 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.defineProperties(person, &#123;</div><div class="line">    title : &#123;<span class="attr">value</span> : <span class="string">'fe'</span>, <span class="attr">enumerable</span> : <span class="literal">true</span>&#125;,</div><div class="line">    corp : &#123;<span class="attr">value</span> : <span class="string">'BABA'</span>, <span class="attr">enumerable</span> : <span class="literal">true</span>&#125;,</div><div class="line">    salary : &#123;<span class="attr">value</span> : <span class="number">50000</span>, <span class="attr">enumerable</span> : <span class="literal">true</span>, <span class="attr">writable</span> : <span class="literal">true</span>&#125;,</div><div class="line">    luck : &#123;</div><div class="line">        get : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.random() &gt; <span class="number">0.5</span> ? <span class="string">'good'</span> : <span class="string">'bad'</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    promote : &#123;</div><div class="line">        set : <span class="function"><span class="keyword">function</span> (<span class="params">level</span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.salary *= <span class="number">1</span> + level * <span class="number">0.1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(person, <span class="string">'salary'</span>);</div><div class="line"><span class="comment">// Object &#123;value: 50000, writable: true, enumerable: true, configurable: false&#125;</span></div><div class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(person, <span class="string">'corp'</span>);</div><div class="line"><span class="comment">// Object &#123;value: "BABA", writable: false, enumerable: true, configurable: false&#125;</span></div><div class="line">person.salary; <span class="comment">// 50000</span></div><div class="line">person.promote = <span class="number">2</span>;</div><div class="line">person.salary; <span class="comment">// 60000</span></div></pre></td></tr></table></figure>
<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> person = &#123;<span class="attr">age</span> : <span class="number">28</span>, <span class="attr">title</span> : <span class="string">'fe'</span>&#125;;</div><div class="line"><span class="keyword">delete</span> person.age; <span class="comment">// true</span></div><div class="line"><span class="keyword">delete</span> person[<span class="string">'title'</span>]; <span class="comment">// true</span></div><div class="line">person.age; <span class="comment">// undefined</span></div><div class="line"><span class="keyword">delete</span> person.age; <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="keyword">delete</span> <span class="built_in">Object</span>.prototype; <span class="comment">// false,</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> descriptor = <span class="built_in">Object</span>.getOwnPropertyDescriptor(<span class="built_in">Object</span>, <span class="string">'prototype'</span>);</div><div class="line">descriptor.configurable; <span class="comment">// false</span></div></pre></td></tr></table></figure>
<p><strong> delete 不能删除全局变量, 局部变量, 函数声明.<br>但是可以删除隐式的全局变量 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ohNo = <span class="number">1</span>;</div><div class="line"><span class="built_in">window</span>.ohNo; <span class="comment">// 1</span></div><div class="line"><span class="keyword">delete</span> ohNo; <span class="comment">// true</span></div></pre></td></tr></table></figure></p>
<h4 id="属性检测"><a href="#属性检测" class="headerlink" title="属性检测"></a>属性检测</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> <span class="built_in">Object</span>;</div><div class="line">cat.legs = <span class="number">4</span>;</div><div class="line">cat.name = <span class="string">"Kitty"</span>;</div><div class="line"></div><div class="line"><span class="string">'legs'</span> <span class="keyword">in</span> cat; <span class="comment">// true</span></div><div class="line"><span class="string">'abc'</span> <span class="keyword">in</span> cat; <span class="comment">// false</span></div><div class="line"><span class="comment">//in 会向上查找原型上是否有.</span></div><div class="line"><span class="string">"toString"</span> <span class="keyword">in</span> cat; <span class="comment">// true, inherited property!!!</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">cat.hasOwnProperty(<span class="string">'legs'</span>); <span class="comment">// true</span></div><div class="line">cat.hasOwnProperty(<span class="string">'toString'</span>); <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="comment">// 属性是否可枚举</span></div><div class="line">cat.propertyIsEnumerable(<span class="string">'legs'</span>); <span class="comment">// true</span></div><div class="line">cat.propertyIsEnumerable(<span class="string">'toString'</span>); <span class="comment">// false</span></div></pre></td></tr></table></figure>
<h4 id="getter-setter方法"><a href="#getter-setter方法" class="headerlink" title="getter/setter方法"></a>getter/setter方法</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> man = &#123;</div><div class="line">    name : <span class="string">'Bosn'</span>,</div><div class="line">    weibo : <span class="string">'@Bosn'</span>,</div><div class="line">    get age() &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear() - <span class="number">1988</span>;</div><div class="line">    &#125;,</div><div class="line">    set age(val) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Age can\'t be set to '</span> + val);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(man.age); <span class="comment">// 27</span></div><div class="line">man.age = <span class="number">100</span>; <span class="comment">// Age can't be set to 100</span></div><div class="line"><span class="built_in">console</span>.log(man.age); <span class="comment">// still 27</span></div></pre></td></tr></table></figure>
<h5 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> man = &#123;</div><div class="line">    weibo : <span class="string">'@Bosn'</span>,</div><div class="line">    $age : <span class="literal">null</span>,</div><div class="line">    get age() &#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.$age == <span class="literal">undefined</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear() - <span class="number">1988</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.$age;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    set age(val) &#123;</div><div class="line">        <span class="comment">// 用一元运算+ 转换val为数字.</span></div><div class="line">        val = +val;</div><div class="line">        <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(val) &amp;&amp; val &gt; <span class="number">0</span> &amp;&amp; val &lt; <span class="number">150</span>) &#123;</div><div class="line">            <span class="keyword">this</span>.$age = +val;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Incorrect val = '</span> + val);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//测试结果:</span></div><div class="line"><span class="built_in">console</span>.log(man.age); <span class="comment">// 27</span></div><div class="line">man.age = <span class="number">100</span>;</div><div class="line"><span class="built_in">console</span>.log(man.age); <span class="comment">// 100;</span></div><div class="line">man.age = <span class="string">'abc'</span>; <span class="comment">// error:Incorrect val = NaN</span></div></pre></td></tr></table></figure>
<h5 id="get-set与原型链结合"><a href="#get-set与原型链结合" class="headerlink" title="get/set与原型链结合"></a>get/set与原型链结合</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"></div><div class="line"><span class="built_in">Object</span>.defineProperty(foo.prototype, <span class="string">'z'</span>, &#123;<span class="attr">get</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="number">1</span>;&#125;&#125;);</div><div class="line">    </div><div class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> foo();</div><div class="line"></div><div class="line">obj.z; <span class="comment">// 1</span></div><div class="line">obj.z = <span class="number">10</span>;</div><div class="line">obj.z; <span class="comment">// still 1</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">'z'</span>, </div><div class="line">&#123;<span class="attr">value</span> : <span class="number">100</span>, <span class="attr">configurable</span>: <span class="literal">true</span>&#125;);</div><div class="line">obj.z; <span class="comment">// 100;</span></div><div class="line"><span class="keyword">delete</span> obj.z;</div><div class="line">obj.z; <span class="comment">// back to 1</span></div></pre></td></tr></table></figure>
<h3 id="对象标签"><a href="#对象标签" class="headerlink" title="对象标签"></a>对象标签</h3><h4 id="proto指向原型"><a href="#proto指向原型" class="headerlink" title="proto指向原型"></a><strong>proto</strong>指向原型</h4><h4 id="class"><a href="#class" class="headerlink" title="class"></a>class</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> toString = <span class="built_in">Object</span>.prototype.toString;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params">o</span>)</span>&#123;<span class="keyword">return</span> toString.call(o).slice(<span class="number">8</span>,<span class="number">-1</span>);&#125;;</div><div class="line"></div><div class="line">toString.call(<span class="literal">null</span>); <span class="comment">// "[object Null]"</span></div><div class="line">getType(<span class="literal">null</span>); <span class="comment">// "Null"</span></div><div class="line">getType(<span class="literal">undefined</span>); <span class="comment">// "Undefined"</span></div><div class="line">getType(<span class="number">1</span>); <span class="comment">// "Number"</span></div><div class="line">getType(<span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">1</span>)); <span class="comment">// "Number"</span></div><div class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">1</span>); <span class="comment">// "object"</span></div><div class="line">getType(<span class="literal">true</span>); <span class="comment">// "Boolean"</span></div><div class="line">getType(<span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">true</span>)); <span class="comment">// "Boolean"</span></div><div class="line"><span class="string">`</span></div></pre></td></tr></table></figure>
<h4 id="extensible-seal-freeze"><a href="#extensible-seal-freeze" class="headerlink" title="extensible / seal / freeze"></a>extensible / seal / freeze</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">x</span> : <span class="number">1</span>, <span class="attr">y</span> : <span class="number">2</span>&#125;;</div><div class="line"><span class="comment">//是否可扩展, 默认true.</span></div><div class="line"><span class="built_in">Object</span>.isExtensible(obj); <span class="comment">// true</span></div><div class="line"><span class="comment">//阻止对象扩展, 对于原有的属性x, y还是可以修改的.</span></div><div class="line"><span class="built_in">Object</span>.preventExtensions(obj);</div><div class="line"><span class="built_in">Object</span>.isExtensible(obj); <span class="comment">// false</span></div><div class="line">obj.z = <span class="number">1</span>;</div><div class="line">obj.z; <span class="comment">// undefined, add new property failed</span></div><div class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, <span class="string">'x'</span>);</div><div class="line"><span class="comment">// Object &#123;value: 1, writable: true, enumerable: true, configurable: true&#125;</span></div><div class="line"></div><div class="line"><span class="comment">//锁定::设置对象上所有属性的configurable=false.</span></div><div class="line"><span class="built_in">Object</span>.seal(obj);</div><div class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, <span class="string">'x'</span>);</div><div class="line"><span class="comment">// Object &#123;value: 1, writable: true, enumerable: true, configurable: false&#125;</span></div><div class="line"><span class="built_in">Object</span>.isSealed(obj); <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="comment">//冻结::设置对象上的所有属性的configurable=false, writable=false.</span></div><div class="line"><span class="built_in">Object</span>.freeze(obj);</div><div class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, <span class="string">'x'</span>);</div><div class="line"><span class="comment">// Object &#123;value: 1, writable: false, enumerable: true, configurable: false&#125;</span></div><div class="line"><span class="built_in">Object</span>.isFrozen(obj); <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="comment">// [caution] not affects prototype chain!!!</span></div></pre></td></tr></table></figure>
<h3 id="对象创建"><a href="#对象创建" class="headerlink" title="对象创建"></a>对象创建</h3><h4 id="字面量方式创建"><a href="#字面量方式创建" class="headerlink" title="{}字面量方式创建"></a>{}字面量方式创建</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj1 = &#123;<span class="attr">x</span> : <span class="number">1</span>, <span class="attr">y</span> : <span class="number">2</span>&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj2 = &#123;</div><div class="line">    x : <span class="number">1</span>,</div><div class="line">    y : <span class="number">2</span>,</div><div class="line">    o : &#123;</div><div class="line">        z : <span class="number">3</span>,</div><div class="line">        n : <span class="number">4</span></div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="new-原型链"><a href="#new-原型链" class="headerlink" title="new/原型链"></a>new/原型链</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">foo.prototype.z = <span class="number">3</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj =<span class="keyword">new</span> foo();</div><div class="line">obj.y = <span class="number">2</span>;</div><div class="line">obj.x = <span class="number">1</span>;</div><div class="line"></div><div class="line">obj.x; <span class="comment">// 1</span></div><div class="line">obj.y; <span class="comment">// 2</span></div><div class="line">obj.z; <span class="comment">// 3</span></div><div class="line"><span class="keyword">typeof</span> obj.toString; <span class="comment">//‘function'</span></div><div class="line"><span class="string">'z'</span> <span class="keyword">in</span> obj; <span class="comment">// true</span></div><div class="line">obj.hasOwnProperty(<span class="string">'z'</span>); <span class="comment">// false</span></div><div class="line"></div><div class="line">obj.z = <span class="number">5</span>; <span class="comment">//仅在obj对象上创建z属性.</span></div><div class="line"></div><div class="line">obj.hasOwnProperty(<span class="string">'z'</span>); <span class="comment">// true</span></div><div class="line">foo.prototype.z; <span class="comment">// still 3</span></div><div class="line">obj.z; <span class="comment">// 5</span></div><div class="line"></div><div class="line">obj.z = <span class="literal">undefined</span>;</div><div class="line">obj.z; <span class="comment">// undefined</span></div><div class="line"></div><div class="line"><span class="comment">//如果仍想访问原型上的z, 需要删除对象上的z.</span></div><div class="line"><span class="keyword">delete</span> obj.z; <span class="comment">// true</span></div><div class="line">obj.z; <span class="comment">// 3</span></div><div class="line"></div><div class="line"><span class="comment">//delete只能删除对象的属性, 不能删除原型上的.</span></div><div class="line"><span class="keyword">delete</span> obj.z; <span class="comment">// true</span></div><div class="line">obj.z; <span class="comment">// still 3!!!</span></div></pre></td></tr></table></figure>
<h4 id="Object-create"><a href="#Object-create" class="headerlink" title="Object.create"></a>Object.create</h4><p>Object.create是系统内置的函数,它会返回一个新创建的对象, 并且这个创建的对象的原型指向这个参数对象.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(&#123;<span class="attr">x</span> : <span class="number">1</span>&#125;);</div><div class="line">obj.x <span class="comment">// 1</span></div><div class="line"><span class="keyword">typeof</span> obj.toString <span class="comment">// "function"</span></div><div class="line"><span class="comment">//由于obj的原型是参数&#123;x:&#125;, 所以x是原型的属性, 而不是对象的属性.</span></div><div class="line">obj.hasOwnProperty(<span class="string">'x'</span>);<span class="comment">// false</span></div></pre></td></tr></table></figure></p>
<h3 id="序列化–-JSON-stringify"><a href="#序列化–-JSON-stringify" class="headerlink" title="序列化– JSON.stringify()"></a>序列化– JSON.stringify()</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">x</span> : <span class="number">1</span>, <span class="attr">y</span> : <span class="literal">true</span>, <span class="attr">z</span> : [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="attr">nullVal</span> : <span class="literal">null</span>&#125;;</div><div class="line"><span class="built_in">JSON</span>.stringify(obj); <span class="comment">// "&#123;"x":1,"y":true,"z":[1,2,3],"nullVal":null&#125;"</span></div><div class="line"></div><div class="line">obj = &#123;<span class="attr">val</span> : <span class="literal">undefined</span>, <span class="attr">a</span> : <span class="literal">NaN</span>, <span class="attr">b</span> : <span class="literal">Infinity</span>, <span class="attr">c</span> : <span class="keyword">new</span> <span class="built_in">Date</span>()&#125;;</div><div class="line"><span class="built_in">JSON</span>.stringify(obj); <span class="comment">// "&#123;"a":null,"b":null,"c":"2015-01-20T14:15:43.910Z"&#125;"</span></div><div class="line"></div><div class="line">obj = <span class="built_in">JSON</span>.parse(<span class="string">'&#123;"x" : 1&#125;'</span>);</div><div class="line">obj.x; <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<h4 id="toJSON-自定义-序列化"><a href="#toJSON-自定义-序列化" class="headerlink" title="toJSON 自定义-序列化"></a>toJSON 自定义-序列化</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    x : <span class="number">1</span>,</div><div class="line">    y : <span class="number">2</span>,</div><div class="line">    o : &#123;</div><div class="line">        o1 : <span class="number">1</span>,</div><div class="line">        o2 : <span class="number">2</span>,</div><div class="line">        toJSON : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.o1 + <span class="keyword">this</span>.o2;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">JSON</span>.stringify(obj); <span class="comment">// "&#123;"x":1,"y":2,"o":3&#125;"</span></div></pre></td></tr></table></figure>
<h4 id="valueOf-实现基本类型"><a href="#valueOf-实现基本类型" class="headerlink" title="valueOf 实现基本类型"></a>valueOf 实现基本类型</h4><p><strong> 其他对象方法 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">x</span> : <span class="number">1</span>, <span class="attr">y</span> : <span class="number">2</span>&#125;;</div><div class="line">obj.toString(); <span class="comment">// "[object Object]"</span></div><div class="line">obj.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>.x + <span class="keyword">this</span>.y&#125;;</div><div class="line"><span class="string">"Result "</span> + obj; <span class="comment">// "Result 3", by toString</span></div><div class="line"></div><div class="line">+obj; <span class="comment">// 3, from toString</span></div><div class="line"><span class="comment">//</span></div><div class="line">obj.valueOf = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>.x + <span class="keyword">this</span>.y + <span class="number">100</span>;&#125;;</div><div class="line">+obj; <span class="comment">// 103, from valueOf</span></div><div class="line"></div><div class="line"><span class="string">"Result "</span> + obj; <span class="comment">// still "Result 3"</span></div></pre></td></tr></table></figure></p>
<h2 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h2><h3 id="block"><a href="#block" class="headerlink" title="block{}"></a>block{}</h3><p>请注意：没有块级作用域</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(<span class="literal">true</span>)&#123;</div><div class="line">    <span class="keyword">var</span> ss = <span class="string">'aaa'</span>;</div><div class="line">&#125;</div><div class="line">ss</div><div class="line"><span class="string">"aaa"</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> a = b = <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line">foo();</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a);  <span class="comment">// ‘undefined’</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b);  <span class="comment">// ‘number’</span></div></pre></td></tr></table></figure>
<p>如何避免上面函数中变为全局变量.<br><code>var a=1, b=1;</code></p>
<h3 id="for…in"><a href="#for…in" class="headerlink" title="for…in"></a>for…in</h3><ol>
<li>顺序不确定</li>
<li>enumerable为false时不会出现</li>
<li>for in对象属性时受原型链影响</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> p;</div><div class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">x</span> : <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> (p <span class="keyword">in</span> obj) &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="with"><a href="#with" class="headerlink" title="with"></a>with</h3><p>JS的严格模式下已经禁用with</p>
<ul>
<li>让JS引擎优化更难</li>
<li>可读性差</li>
<li>可被变量定义代替<br>-严格模式下被禁用</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">with</span> (&#123;<span class="attr">x</span> : <span class="number">1</span>&#125;) &#123;</div><div class="line">    <span class="built_in">console</span>.log(x);</div><div class="line">&#125;</div><div class="line"><span class="keyword">with</span> (<span class="built_in">document</span>.forms[<span class="number">0</span>]) &#123;</div><div class="line">    <span class="built_in">console</span>.log(name.value);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> form = <span class="built_in">document</span>.forms[<span class="number">0</span>];</div><div class="line"><span class="built_in">console</span>.log(form.name.value);</div></pre></td></tr></table></figure>
<h3 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h3><p>严格模式是一种特殊的执行模式，<br>它修复了部分语言上的不足，<br>提供更强的错误检查，并增强安全性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line"><span class="meta">    'use strict'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>不允许用with  //SyntaxError<br>不允许未声明的变量被赋值</p>
<h4 id="不允许用with"><a href="#不允许用with" class="headerlink" title="不允许用with"></a>不允许用with</h4><h4 id="不允许未声明的变量被赋值"><a href="#不允许未声明的变量被赋值" class="headerlink" title="不允许未声明的变量被赋值"></a>不允许未声明的变量被赋值</h4><p>ReferenceError<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"><span class="meta">	'use strict'</span>;</div><div class="line">	 x = <span class="number">1</span>;</div><div class="line">      <span class="built_in">console</span>.log(<span class="built_in">window</span>.x);</div><div class="line">&#125;();</div></pre></td></tr></table></figure></p>
<h4 id="arguments变为参数的静态副本"><a href="#arguments变为参数的静态副本" class="headerlink" title="arguments变为参数的静态副本"></a>arguments变为参数的静态副本</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</div><div class="line">	<span class="built_in">arguments</span>[<span class="number">0</span>] = <span class="number">100</span>;</div><div class="line">	<span class="built_in">console</span>.log(a); <span class="comment">//100</span></div><div class="line">&#125;(<span class="number">1</span>);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</div><div class="line"><span class="meta">	'use strict'</span>;</div><div class="line">	<span class="built_in">arguments</span>[<span class="number">0</span>] = <span class="number">100</span>;</div><div class="line">	<span class="built_in">console</span>.log(a); <span class="comment">//1</span></div><div class="line">&#125;(<span class="number">1</span>);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</div><div class="line"><span class="meta">	'use strict'</span>;</div><div class="line">	<span class="built_in">arguments</span>[<span class="number">0</span>].x = <span class="number">100</span>;</div><div class="line">	<span class="built_in">console</span>.log(a.x); <span class="comment">//100</span></div><div class="line">&#125;(&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;);</div></pre></td></tr></table></figure>
<h4 id="delete参数、函数名报错"><a href="#delete参数、函数名报错" class="headerlink" title="delete参数、函数名报错"></a>delete参数、函数名报错</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">delete</span> a); <span class="comment">//false</span></div><div class="line">&#125;(<span class="number">1</span>);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</div><div class="line"><span class="meta">	'use strict'</span>;</div><div class="line">	<span class="keyword">delete</span> a; <span class="comment">//SyntaxError</span></div><div class="line"></div><div class="line">&#125;(<span class="number">1</span>);</div></pre></td></tr></table></figure>
<h4 id="delete不可配置的属性报错"><a href="#delete不可配置的属性报错" class="headerlink" title="delete不可配置的属性报错"></a>delete不可配置的属性报错</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line">	<span class="built_in">Object</span>.defineProperty(obj, </div><div class="line">        <span class="string">'a'</span>, &#123;<span class="attr">configurable</span> : <span class="literal">false</span>&#125;);</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">delete</span> obj.a); <span class="comment">//false</span></div><div class="line">&#125;(<span class="number">1</span>);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params">a</span>) </span>&#123;</div><div class="line"><span class="meta">	'use strict'</span>;</div><div class="line">	<span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line">	<span class="built_in">Object</span>.defineProperty(obj, </div><div class="line">        <span class="string">'a'</span>, &#123;<span class="attr">configurable</span> : <span class="literal">false</span>&#125;);</div><div class="line">	<span class="keyword">delete</span> obj.a; <span class="comment">//TypeError</span></div><div class="line">&#125;(<span class="number">1</span>);</div></pre></td></tr></table></figure>
<h4 id="对象字面量重复属性名报错"><a href="#对象字面量重复属性名报错" class="headerlink" title="对象字面量重复属性名报错"></a>对象字面量重复属性名报错</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> obj = &#123;<span class="attr">x</span> : <span class="number">1</span>, <span class="attr">x</span> : <span class="number">2</span>&#125;;</div><div class="line">    <span class="built_in">console</span>.log(obj.x); <span class="comment">//2</span></div><div class="line">&#125;();</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"><span class="meta">	'use strict'</span>;</div><div class="line">	<span class="keyword">var</span> obj = &#123;<span class="attr">x</span> : <span class="number">1</span>, <span class="attr">x</span> : <span class="number">2</span>&#125;; <span class="comment">//SyntaxError</span></div><div class="line">&#125;();</div></pre></td></tr></table></figure>
<h4 id="禁止八进制字面量"><a href="#禁止八进制字面量" class="headerlink" title="禁止八进制字面量"></a>禁止八进制字面量</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="number">0123</span>); <span class="comment">//83</span></div><div class="line">&#125;();</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"><span class="meta">	'use strict'</span>;</div><div class="line">	<span class="built_in">console</span>.log(<span class="number">0123</span>); <span class="comment">//SyntaxError</span></div><div class="line">&#125;();</div></pre></td></tr></table></figure>
<h4 id="eval-arguments变为关键字，不能作为变量、函数名"><a href="#eval-arguments变为关键字，不能作为变量、函数名" class="headerlink" title="eval, arguments变为关键字，不能作为变量、函数名"></a>eval, arguments变为关键字，不能作为变量、函数名</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">eval</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">eval</span>);</div><div class="line">&#125;();</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">eval</span>(<span class="params"></span>)</span>&#123;&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"><span class="meta">	'use strict'</span>;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">eval</span>(<span class="params"></span>)</span>&#123;&#125; <span class="comment">//SyntaxError</span></div><div class="line">&#125;();</div></pre></td></tr></table></figure>
<h4 id="eval独立作用域"><a href="#eval独立作用域" class="headerlink" title="eval独立作用域"></a>eval独立作用域</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">eval</span>(<span class="string">'var evalVal = 2;'</span>);</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">typeof</span> evalVal); <span class="comment">//number</span></div><div class="line">&#125;();</div></pre></td></tr></table></figure>
<p>undefined<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"><span class="meta">	'use strict'</span>;</div><div class="line">	<span class="built_in">eval</span>(<span class="string">'var evalVal = 2;'</span>);</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">typeof</span> evalVal); <span class="comment">//undefined</span></div><div class="line">&#125;();</div></pre></td></tr></table></figure></p>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><p>不允许用with<br>所有变量必须声明, 赋值给为声明的变量报错，而不是隐式创建全局变量。<br>eval中的代码不能创建eval所在作用域下的变量、函数。而是为eval单独创建一个作用域，并在eval返回时丢弃。<br>函数中得特殊对象arguments是静态副本，而不像非严格模式那样，修改arguments或修改参数变量会相互影响。<br>删除configurable=false的属性时报错，而不是忽略<br>禁止八进制字面量，如010 (八进制的8)<br>eval, arguments变为关键字，不可作为变量名、函数名等<br><em> 一般函数调用时(不是对象的方法调用，也不使用apply/call/bind等修改this)this指向null，而不是全局对象。<br>若使用apply/call，当传入null或undefined时，this将指向null或undefined，而不是全局对象。<br>试图修改不可写属性(writable=false)，在不可扩展的对象上添加属性时报TypeError，而不是忽略。<br>arguments.caller, arguments.callee被禁用 </em></p>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>数组是值的有序集合。每个值叫做元素，每个元素在数组中都有数字位置编号，也就是索引。JS中的数组是弱类型的，数组中可以含有不同类型的元素。数组元素甚至可以是对象或其它数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&#123;&#125;   =&gt;  <span class="built_in">Object</span>.prototype</div><div class="line">[]   =&gt;  <span class="built_in">Array</span>.prototype</div><div class="line"></div><div class="line"><span class="keyword">var</span> arr = [];</div><div class="line">arr.__proto__ === <span class="built_in">Array</span>.prototype <span class="comment">//true</span></div><div class="line"></div><div class="line">/属于<span class="built_in">Array</span>实例</div><div class="line">[] <span class="keyword">instanceof</span> <span class="built_in">Array</span>; <span class="comment">// true</span></div><div class="line"><span class="comment">//</span></div><div class="line">(&#123;&#125;).toString.apply([]) === <span class="string">'[object Array]'</span>; <span class="comment">// true</span></div><div class="line"><span class="comment">//构造器</span></div><div class="line">[].constructor === <span class="built_in">Array</span>; <span class="comment">// true</span></div></pre></td></tr></table></figure>
<h3 id="数组-VS-一般对象"><a href="#数组-VS-一般对象" class="headerlink" title="数组  VS.  一般对象"></a>数组  VS.  一般对象</h3><ul>
<li>相同: <ul>
<li>都可以继承. </li>
<li>数组是对象，对象不一定是数组</li>
<li>都可以当做对象添加删除属性</li>
</ul>
</li>
<li>不同:<ul>
<li>数组自动更新length</li>
<li>按索引访问数组常常比访问一般对象属性明显迅速。</li>
<li>数组对象继承Array.prototype上的大量数组操作方法</li>
</ul>
</li>
</ul>
<h3 id="创建-读写"><a href="#创建-读写" class="headerlink" title="创建/读写"></a>创建/读写</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> BAT = [<span class="string">'Alibaba'</span>, <span class="string">'Tencent'</span>, <span class="string">'Baidu'</span>];</div><div class="line"><span class="keyword">var</span> students = [&#123;<span class="attr">name</span> : <span class="string">'Bosn'</span>, <span class="attr">age</span> : <span class="number">27</span>&#125;, &#123;<span class="attr">name</span> : <span class="string">'Nunnly'</span>, <span class="attr">age</span> : <span class="number">3</span>&#125;];</div><div class="line"><span class="keyword">var</span> arr = [<span class="string">'Nunnly'</span>, <span class="string">'is'</span>, <span class="string">'big'</span>, <span class="string">'keng'</span>, <span class="string">'B'</span>, <span class="number">123</span>, <span class="literal">true</span>, <span class="literal">null</span>];</div><div class="line"><span class="keyword">var</span> arrInArr = [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]];</div><div class="line"></div><div class="line"><span class="keyword">var</span> commasArr1 = [<span class="number">1</span>, , <span class="number">2</span>]; <span class="comment">// 1, undefined, 2</span></div><div class="line"><span class="keyword">var</span> commasArr2 = [,,]; <span class="comment">// undefined * 2</span></div></pre></td></tr></table></figure>
<p><strong> 通过Array构造器创建</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(); </div><div class="line"><span class="keyword">var</span> arrWithLength = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">100</span>); <span class="comment">// undefined * 100</span></div><div class="line"><span class="keyword">var</span> arrLikesLiteral = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">null</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="string">"hi"</span>);</div><div class="line"><span class="comment">// 等价于[true, false, null, 1, 2, "hi"];</span></div></pre></td></tr></table></figure></p>
<p><strong> 读写 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line">arr[<span class="number">1</span>]; <span class="comment">// 2</span></div><div class="line">arr.length; <span class="comment">// 5</span></div><div class="line"></div><div class="line">arr[<span class="number">5</span>] = <span class="number">6</span>;</div><div class="line">arr.length; <span class="comment">// 6</span></div><div class="line"></div><div class="line"><span class="keyword">delete</span> arr[<span class="number">0</span>];</div><div class="line">arr[<span class="number">0</span>]; <span class="comment">// undefined</span></div></pre></td></tr></table></figure></p>
<h3 id="动态的增删元素"><a href="#动态的增删元素" class="headerlink" title="动态的增删元素"></a>动态的增删元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [];</div><div class="line">arr[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">arr[<span class="number">1</span>] = <span class="number">2</span>;</div><div class="line">arr.push(<span class="number">3</span>);</div><div class="line">arr; <span class="comment">// [1, 2, 3]</span></div><div class="line"></div><div class="line">arr[arr.length] = <span class="number">4</span>; <span class="comment">// equal to arr.push(4);</span></div><div class="line">arr; <span class="comment">// [1, 2, 3, 4]</span></div><div class="line"></div><div class="line">arr.unshift(<span class="number">0</span>);</div><div class="line">arr; <span class="comment">// [0, 1, 2, 3, 4];</span></div><div class="line"></div><div class="line"><span class="keyword">delete</span> arr[<span class="number">2</span>];</div><div class="line">arr; <span class="comment">// [0, 1, undefined, 3, 4]</span></div><div class="line">arr.length; <span class="comment">// 5</span></div><div class="line"><span class="number">2</span> <span class="keyword">in</span> arr; <span class="comment">// false</span></div><div class="line"></div><div class="line">arr.length -= <span class="number">1</span>;</div><div class="line">arr; <span class="comment">// [0, 1, undefined, 3, 4],  4 is removed</span></div><div class="line"></div><div class="line">arr.pop(); <span class="comment">// 3 returned by pop</span></div><div class="line">arr; <span class="comment">// [0, 1, undefined], 3 is removed</span></div><div class="line"></div><div class="line">arr.shift(); <span class="comment">// 0 returned by shift</span></div><div class="line">arr; <span class="comment">// [1, undefined]</span></div></pre></td></tr></table></figure>
<h3 id="for…in-迭代"><a href="#for…in-迭代" class="headerlink" title="for…in 迭代"></a>for…in 迭代</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> i = <span class="number">0</span>, n = <span class="number">10</span>;</div><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line"><span class="keyword">for</span> (; i &lt; n; i++) &#123;</div><div class="line">    <span class="built_in">console</span>.log(arr[i]); <span class="comment">// 1, 2, 3, 4, 5</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> arr) &#123;</div><div class="line">    <span class="built_in">console</span>.log(arr[i]); <span class="comment">// 1, 2, 3, 4, 5</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong> for…in迭代, 过滤掉原型上的属性 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.x = <span class="string">'inherited'</span>;</div><div class="line"></div><div class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> arr) &#123;</div><div class="line">    <span class="built_in">console</span>.log(arr[i]); <span class="comment">// 1, 2, 3, 4, 5, inherited</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> arr) &#123;</div><div class="line">    <span class="keyword">if</span> (arr.hasOwnProperty(i)) &#123;</div><div class="line">        <span class="built_in">console</span>.log(arr[i]); <span class="comment">// 1, 2, 3, 4, 5</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>]];</div><div class="line"><span class="keyword">var</span> i = <span class="number">0</span>, j = <span class="number">0</span>;</div><div class="line"><span class="keyword">var</span> row;</div><div class="line"><span class="keyword">for</span> (; i &lt; arr.length; i++) &#123;</div><div class="line">     row = arr[i];</div><div class="line">     <span class="built_in">console</span>.log(<span class="string">'row '</span> + i);</div><div class="line">     <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; row.length; j++) &#123;</div><div class="line">          <span class="built_in">console</span>.log(row[j]);</div><div class="line">     &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//结果:</span></div><div class="line"><span class="comment">// result:</span></div><div class="line"><span class="comment">// row 0</span></div><div class="line"><span class="comment">// 0</span></div><div class="line"><span class="comment">// 1</span></div><div class="line"><span class="comment">// row 1</span></div><div class="line"><span class="comment">// 2</span></div><div class="line"><span class="comment">// 3</span></div><div class="line"><span class="comment">// row 2</span></div><div class="line"><span class="comment">// 4</span></div><div class="line"><span class="comment">// 5</span></div></pre></td></tr></table></figure>
<h3 id="稀疏数组"><a href="#稀疏数组" class="headerlink" title="稀疏数组"></a>稀疏数组</h3><p><em>稀疏数组并不含有从0开始的连续索引。一般length属性值比实际元素个数大。</em></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr1 = [<span class="literal">undefined</span>];</div><div class="line"><span class="keyword">var</span> arr2 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>);</div><div class="line"><span class="number">0</span> <span class="keyword">in</span> arr1; <span class="comment">// true</span></div><div class="line"><span class="number">0</span> <span class="keyword">in</span> arr2; <span class="comment">// false</span></div><div class="line">arr1.length = <span class="number">100</span>;</div><div class="line">arr1[<span class="number">99</span>] = <span class="number">123</span>;</div><div class="line"><span class="number">99</span> <span class="keyword">in</span> arr1; <span class="comment">// true</span></div><div class="line"><span class="number">98</span> <span class="keyword">in</span> arr1; <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> arr = [,,];</div><div class="line"><span class="number">0</span> <span class="keyword">in</span> arr; <span class="comment">// false</span></div></pre></td></tr></table></figure>
<h3 id="字符串和数组"><a href="#字符串和数组" class="headerlink" title="字符串和数组"></a>字符串和数组</h3><p><strong> <em> 字符串是类数组 </em> </strong><br><strong> 字符串不是数组, 是不可变的.<br>字符串上没有数组上的方法,<br>如果要使用数组的一些方法, 需要通过Array.prototype原型来调用. </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> str = <span class="string">"hello world"</span>;</div><div class="line">str.charAt(<span class="number">0</span>); <span class="comment">// "h"</span></div><div class="line">str[<span class="number">1</span>]; <span class="comment">// e</span></div><div class="line"></div><div class="line"><span class="comment">//字符串不是数组, 但是可以通过数组原型的方法操作字符串.</span></div><div class="line"><span class="built_in">Array</span>.prototype.join.call(str, <span class="string">"_"</span>);</div><div class="line"><span class="comment">// "h_e_l_l_o_ _w_o_r_l_d"</span></div></pre></td></tr></table></figure></p>
<h3 id="Array-原型上的方法"><a href="#Array-原型上的方法" class="headerlink" title="Array 原型上的方法"></a>Array 原型上的方法</h3><p><strong> 数组Array原型上的方法 </strong> </p>
<ul>
<li>Array.prototype.join</li>
<li>Array.prototype.reverse</li>
<li>Array.prototype.sort</li>
<li>Array.prototype.concat</li>
<li>Array.prototype.slice 切片</li>
<li>Array.prototype.splice 胶接</li>
<li>Array.prototype.forEach  (ES5)</li>
<li>Array.prototype.map    (ES5)</li>
<li>Array.prototype.filter (ES5)</li>
<li>Array.prototype.every  (ES5)</li>
<li>Array.prototype.some   (ES5)</li>
<li>Array.prototype.reduce/reduceRight  (ES5)</li>
<li>Array.prototype.indexOf/lastIndexOf  (ES5)</li>
<li>Array.isArray(ES5)</li>
</ul>
<h4 id="join"><a href="#join" class="headerlink" title="join"></a>join</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line">arr.join(); <span class="comment">// "1,2,3"</span></div><div class="line">arr.join(<span class="string">"_"</span>); <span class="comment">// "1_2_3"</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">repeatString</span>(<span class="params">str, n</span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>).join(str);</div><div class="line">&#125;</div><div class="line">repeatString(<span class="string">"a"</span>, <span class="number">3</span>); <span class="comment">// "aaa"</span></div><div class="line">repeatString(<span class="string">"Hi"</span>, <span class="number">5</span>); <span class="comment">// "HiHiHiHiHi"</span></div></pre></td></tr></table></figure>
<h4 id="indexOf-lastIndexOf-数组检索"><a href="#indexOf-lastIndexOf-数组检索" class="headerlink" title="indexOf / lastIndexOf 数组检索"></a>indexOf / lastIndexOf 数组检索</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</div><div class="line">arr.indexOf(<span class="number">2</span>); <span class="comment">// 1</span></div><div class="line">arr.indexOf(<span class="number">99</span>); <span class="comment">// -1</span></div><div class="line">arr.indexOf(<span class="number">1</span>, <span class="number">1</span>); <span class="comment">// 4</span></div><div class="line">arr.indexOf(<span class="number">1</span>, <span class="number">-3</span>); <span class="comment">// 4</span></div><div class="line">arr.indexOf(<span class="number">2</span>, <span class="number">-1</span>); <span class="comment">// -1</span></div><div class="line">arr.lastIndexOf(<span class="number">2</span>); <span class="comment">// 3</span></div><div class="line">arr.lastIndexOf(<span class="number">2</span>, <span class="number">-2</span>); <span class="comment">// 3</span></div><div class="line">arr.lastIndexOf(<span class="number">2</span>, <span class="number">-3</span>); <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<h4 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">x, index, a</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(x + <span class="string">'|'</span> + index + <span class="string">'|'</span> + (a === arr));</div><div class="line">&#125;);</div><div class="line"><span class="comment">// 1|0|true</span></div><div class="line"><span class="comment">// 2|1|true</span></div><div class="line"><span class="comment">// 3|2|true</span></div><div class="line"><span class="comment">// 4|3|true</span></div><div class="line"><span class="comment">// 5|4|true</span></div><div class="line"><span class="string">`</span></div></pre></td></tr></table></figure>
<h4 id="every-some-数组判断"><a href="#every-some-数组判断" class="headerlink" title="every / some 数组判断"></a>every / some 数组判断</h4><p><strong> <em> 数组判断 </em> </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line">arr.every(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> x &lt; <span class="number">10</span>;</div><div class="line">&#125;); <span class="comment">// true</span></div><div class="line"></div><div class="line">arr.every(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> x &lt; <span class="number">3</span>;</div><div class="line">&#125;); <span class="comment">// false</span></div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line">arr.some(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> x === <span class="number">3</span>;</div><div class="line">&#125;); <span class="comment">// true</span></div><div class="line"></div><div class="line">arr.some(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> x === <span class="number">100</span>;</div><div class="line">&#125;); <span class="comment">// false</span></div></pre></td></tr></table></figure>
<h4 id="reverse-修改"><a href="#reverse-修改" class="headerlink" title="reverse 修改"></a>reverse 修改</h4><p>原数组被修改<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line">arr.reverse(); <span class="comment">// [3, 2, 1]</span></div><div class="line">arr; <span class="comment">// [3, 2, 1]</span></div></pre></td></tr></table></figure></p>
<h4 id="sort-修改"><a href="#sort-修改" class="headerlink" title="sort 修改"></a>sort 修改</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="string">"a"</span>, <span class="string">"d"</span>, <span class="string">"c"</span>, <span class="string">"b"</span>];</div><div class="line">arr.sort(); <span class="comment">// ["a", "b", "c", "d"]</span></div><div class="line"></div><div class="line">arr = [<span class="number">13</span>, <span class="number">24</span>, <span class="number">51</span>, <span class="number">3</span>];</div><div class="line">arr.sort(); <span class="comment">// [13, 24, 3, 51]</span></div><div class="line">arr; <span class="comment">// [13, 24, 3, 51]</span></div><div class="line"><span class="comment">//原数组被修改.</span></div><div class="line"></div><div class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> a - b;</div><div class="line">&#125;); <span class="comment">// [3, 13, 24, 51]</span></div><div class="line"></div><div class="line">arr = [&#123;<span class="attr">age</span> : <span class="number">25</span>&#125;, &#123;<span class="attr">age</span> : <span class="number">39</span>&#125;, &#123;<span class="attr">age</span> : <span class="number">99</span>&#125;];</div><div class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> a.age - b.age;</div><div class="line">&#125;);</div><div class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</div><div class="line">     <span class="built_in">console</span>.log(<span class="string">'age'</span>, item.age);</div><div class="line">&#125;);</div><div class="line"><span class="comment">// result:</span></div><div class="line"><span class="comment">// age 25</span></div><div class="line"><span class="comment">// age 39</span></div><div class="line"><span class="comment">// age 99</span></div></pre></td></tr></table></figure>
<h4 id="splice-修改"><a href="#splice-修改" class="headerlink" title="splice 修改"></a>splice 修改</h4><p><strong> <em> 原数组被修改 </em> </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line">arr.splice(<span class="number">2</span>); <span class="comment">// returns [3, 4, 5]</span></div><div class="line">arr; <span class="comment">// [1, 2];</span></div><div class="line"></div><div class="line">arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line">arr.splice(<span class="number">2</span>, <span class="number">2</span>); <span class="comment">// returns [3, 4]</span></div><div class="line">arr; <span class="comment">// [1, 2, 5];</span></div><div class="line"></div><div class="line">arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line">arr.splice(<span class="number">1</span>, <span class="number">1</span>, <span class="string">'a'</span>, <span class="string">'b'</span>); <span class="comment">// returns [2]</span></div><div class="line">arr; <span class="comment">// [1, "a", "b", 3, 4, 5]</span></div></pre></td></tr></table></figure></p>
<h4 id="slice-不修改"><a href="#slice-不修改" class="headerlink" title="slice 不修改"></a>slice 不修改</h4><p><strong> <em> slice原数组未被修改 </em> </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line">arr.slice(<span class="number">1</span>, <span class="number">3</span>); <span class="comment">// [2, 3]</span></div><div class="line">arr.slice(<span class="number">1</span>); <span class="comment">// [2, 3, 4, 5]</span></div><div class="line">arr.slice(<span class="number">1</span>, <span class="number">-1</span>); <span class="comment">// [2, 3, 4]</span></div><div class="line">arr.slice(<span class="number">-4</span>, <span class="number">-3</span>); <span class="comment">// [2]</span></div></pre></td></tr></table></figure></p>
<h4 id="concat-不修改"><a href="#concat-不修改" class="headerlink" title="concat 不修改"></a>concat 不修改</h4><p><strong> <em> concat 原数组未被修改 </em> </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line">arr.concat(<span class="number">4</span>, <span class="number">5</span>); <span class="comment">// [1, 2, 3, 4, 5]</span></div><div class="line">arr; <span class="comment">// [1, 2, 3]</span></div><div class="line"></div><div class="line">arr.concat([<span class="number">10</span>, <span class="number">11</span>], <span class="number">13</span>); <span class="comment">// [1, 2, 3, 10, 11, 13]</span></div><div class="line"></div><div class="line">arr.concat([<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>]]); <span class="comment">// [1, 2, 3, 1, [2, 3]]</span></div></pre></td></tr></table></figure></p>
<h4 id="filter-不修改"><a href="#filter-不修改" class="headerlink" title="filter 不修改"></a>filter 不修改</h4><p><em>* <em> filter不修改原ovxe </em> </em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>];</div><div class="line">arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">x, index</span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> index % <span class="number">3</span> === <span class="number">0</span> || x &gt;= <span class="number">8</span>;</div><div class="line">&#125;); <span class="comment">// returns [1, 4, 7, 8, 9, 10]</span></div><div class="line">arr; <span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></div></pre></td></tr></table></figure></p>
<h4 id="map-不修改"><a href="#map-不修改" class="headerlink" title="map 不修改"></a>map 不修改</h4><p><strong> <em> map不修改原数组 </em> </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line">arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> x + <span class="number">10</span>;</div><div class="line">&#125;); <span class="comment">// [11, 12, 13]</span></div><div class="line">arr; <span class="comment">// [1, 2, 3]</span></div></pre></td></tr></table></figure></p>
<h4 id="reduce-reduceRight-不修改"><a href="#reduce-reduceRight-不修改" class="headerlink" title="reduce / reduceRight 不修改"></a>reduce / reduceRight 不修改</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">max = arr.reduceRight(<span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">     <span class="built_in">console</span>.log(x + <span class="string">"|"</span> + y);</div><div class="line">     <span class="keyword">return</span> x &gt; y ? x : y;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// 6|9</span></div><div class="line"><span class="comment">// 9|3</span></div><div class="line">max; <span class="comment">// 9</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line"><span class="keyword">var</span> sum = arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">     <span class="keyword">return</span> x + y</div><div class="line">&#125;, <span class="number">0</span>); <span class="comment">// 6</span></div><div class="line">arr; <span class="comment">//[1, 2, 3]</span></div><div class="line"></div><div class="line">arr = [<span class="number">3</span>, <span class="number">9</span>, <span class="number">6</span>];</div><div class="line"><span class="keyword">var</span> max = arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">     <span class="built_in">console</span>.log(x + <span class="string">"|"</span> + y);</div><div class="line">     <span class="keyword">return</span> x &gt; y ? x : y;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// 3|9</span></div><div class="line"><span class="comment">// 9|6</span></div><div class="line">max; <span class="comment">// 9</span></div></pre></td></tr></table></figure>
<h4 id="isArray-是否为数组"><a href="#isArray-是否为数组" class="headerlink" title="isArray 是否为数组"></a>isArray 是否为数组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.isArray([]); <span class="comment">// true</span></div><div class="line"></div><div class="line">[] <span class="keyword">instanceof</span> <span class="built_in">Array</span>; <span class="comment">// true</span></div><div class="line">(&#123;&#125;).toString.apply([]) === <span class="string">'[object Array]'</span>; <span class="comment">// true</span></div><div class="line">[].constructor === <span class="built_in">Array</span>; <span class="comment">// true</span></div></pre></td></tr></table></figure>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>函数是一块JavaScript代码，被定义一次，但可执行和调用多次。<br>JS中的函数也是对象，所以JS函数可以像其它对象那样操作和传递<br>所以我们也常叫JS中的函数为函数对象。 </p>
<h3 id="调用方式"><a href="#调用方式" class="headerlink" title="调用方式"></a>调用方式</h3><p><em> 不同的调用方式 </em></p>
<ul>
<li>直接调用: foo();</li>
<li>对象方法: o.method();</li>
<li>构造器: new Foo();</li>
<li>call/apply/bind: func.call(o);</li>
</ul>
<h3 id="函数声明与函数表达式"><a href="#函数声明与函数表达式" class="headerlink" title="函数声明与函数表达式"></a>函数声明与函数表达式</h3><p><strong> 函数声明 </strong><br><em>可以前置</em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span> (<span class="params">a, b</span>) </span>&#123;</div><div class="line">  a = +a;</div><div class="line">  b = +b;</div><div class="line">  <span class="keyword">if</span> (<span class="built_in">isNaN</span>(a) || <span class="built_in">isNaN</span>(b)) &#123;</div><div class="line">    <span class="keyword">return</span>;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> a + b;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong> 函数表达式 </strong><br><em>变量提前为undefined, 函数不前置</em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 函数变量</span></div><div class="line"><span class="comment">// function variable</span></div><div class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</div><div class="line">  <span class="comment">// do sth</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 立即执行函数表达式.</span></div><div class="line"><span class="comment">// IEF(Immediately Executed Function)</span></div><div class="line"><span class="comment">//()和!是把函数作为表达式来处理</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// do sth</span></div><div class="line">&#125;)();</div><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// do sth</span></div><div class="line">&#125;();</div><div class="line"></div><div class="line"><span class="comment">// 将匿名函数对象作为返回值</span></div><div class="line"><span class="comment">// first-class function</span></div><div class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// do sth</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 命名式函数表达式</span></div><div class="line"><span class="comment">// NFE (Named Function Expression)</span></div><div class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params">a, b</span>) </span>&#123;</div><div class="line">  <span class="comment">// do sth</span></div><div class="line">&#125;;</div><div class="line">alert(add === foo); <span class="comment">//IE6~8: false ; IE9:foo is undefined.</span></div><div class="line"><span class="comment">// 递归调用</span></div><div class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> <span class="title">nfe</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">/** do sth.**/</span> </div><div class="line">  nfe();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong> Function构造器 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> func = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'console.log(a + b);'</span>);</div><div class="line">func(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 3</span></div><div class="line"><span class="keyword">var</span> func = <span class="built_in">Function</span>(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'console.log(a + b);'</span>);</div><div class="line">func(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 3</span></div><div class="line"></div><div class="line"><span class="comment">// CASE 1 =&gt; localVal仍为局部变量</span></div><div class="line"><span class="built_in">Function</span>(<span class="string">'var localVal = "local"; console.log(localVal);'</span>)();</div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> localVal);</div><div class="line"><span class="comment">// result: local, undefined</span></div><div class="line"></div><div class="line"><span class="comment">// CASE 2 =&gt; local不可访问, 全局变量global可以访问.</span></div><div class="line"><span class="keyword">var</span> globalVal = <span class="string">'global'</span>;</div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"><span class="keyword">var</span> localVal = <span class="string">'local'</span>;</div><div class="line"><span class="built_in">Function</span>(<span class="string">'console.log(typeof localVal, typeof globalVal);'</span>)();</div><div class="line">&#125;)();</div><div class="line"><span class="comment">// result: undefined, string</span></div></pre></td></tr></table></figure></p>
<h3 id="this-1"><a href="#this-1" class="headerlink" title="this"></a>this</h3><h4 id="全局的this-浏览器"><a href="#全局的this-浏览器" class="headerlink" title="全局的this(浏览器)"></a>全局的this(浏览器)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.document === <span class="built_in">document</span>); <span class="comment">// true</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span> === <span class="built_in">window</span>); <span class="comment">// true</span></div><div class="line"><span class="keyword">this</span>.a = <span class="number">37</span>;</div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.a); <span class="comment">// 37</span></div></pre></td></tr></table></figure>
<h4 id="一般函数的this-浏览器"><a href="#一般函数的this-浏览器" class="headerlink" title="一般函数的this(浏览器)"></a>一般函数的this(浏览器)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line">f1() === <span class="built_in">window</span>; <span class="comment">// true, global object</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</div><div class="line"><span class="meta">  "use strict"</span>; <span class="comment">// see strict mode</span></div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line">f2() === <span class="literal">undefined</span>; <span class="comment">// true</span></div></pre></td></tr></table></figure>
<h4 id="作为对象方法的函数的this"><a href="#作为对象方法的函数的this" class="headerlink" title="作为对象方法的函数的this"></a>作为对象方法的函数的this</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o = &#123;</div><div class="line">  prop: <span class="number">37</span>,</div><div class="line">  f: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.prop;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">console</span>.log(o.f()); <span class="comment">// logs 37</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> o = &#123;<span class="attr">prop</span>: <span class="number">37</span>&#125;;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">independent</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.prop;</div><div class="line">&#125;</div><div class="line">o.f = independent;</div><div class="line"><span class="built_in">console</span>.log(o.f()); <span class="comment">// logs 37</span></div></pre></td></tr></table></figure>
<h4 id="对象原型链上的this"><a href="#对象原型链上的this" class="headerlink" title="对象原型链上的this"></a>对象原型链上的this</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o = &#123;<span class="attr">f</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.a + <span class="keyword">this</span>.b; &#125;&#125;;</div><div class="line"><span class="comment">// 创建一个对象p, p的原型为对象o</span></div><div class="line"><span class="keyword">var</span> p = <span class="built_in">Object</span>.create(o);</div><div class="line">p.a = <span class="number">1</span>;</div><div class="line">p.b = <span class="number">4</span>;</div><div class="line"><span class="comment">// p.f调用的是原型上的方法, 在原型中可以使用this.访问到p实例的属性.</span></div><div class="line"><span class="built_in">console</span>.log(p.f()); <span class="comment">// 5</span></div></pre></td></tr></table></figure>
<h4 id="get-set方法与this"><a href="#get-set方法与this" class="headerlink" title="get/set方法与this"></a>get/set方法与this</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">modulus</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(<span class="keyword">this</span>.re * <span class="keyword">this</span>.re + <span class="keyword">this</span>.im * <span class="keyword">this</span>.im);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> o = &#123;</div><div class="line">  re: <span class="number">1</span>,</div><div class="line">  im: <span class="number">-1</span>,</div><div class="line">  get phase()&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.atan2(<span class="keyword">this</span>.im, <span class="keyword">this</span>.re);</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// 为对象o定义属性modelus, 并指定其get方法为modulus函数. 在其中也是可以用this来访问对象o的属性的.</span></div><div class="line"><span class="built_in">Object</span>.defineProperty(o, <span class="string">'modulus'</span>, &#123;</div><div class="line">  get: modulus, <span class="attr">enumerable</span>:<span class="literal">true</span>, <span class="attr">configurable</span>:<span class="literal">true</span></div><div class="line">&#125;);</div><div class="line"><span class="built_in">console</span>.log(o.phase, o.modulus); <span class="comment">// logs -0.78 1.4142</span></div></pre></td></tr></table></figure>
<h4 id="构造器中的this"><a href="#构造器中的this" class="headerlink" title="构造器中的this"></a>构造器中的this</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyClass</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">this</span>.a = <span class="number">37</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> MyClass();</div><div class="line"><span class="built_in">console</span>.log(o.a); <span class="comment">// 37</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">C2</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">this</span>.a = <span class="number">37</span>;</div><div class="line">  <span class="keyword">return</span> &#123;<span class="attr">a</span> : <span class="number">38</span>&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">o = <span class="keyword">new</span> C2();</div><div class="line"><span class="built_in">console</span>.log(o.a); <span class="comment">// 38</span></div></pre></td></tr></table></figure>
<h4 id="call-apply方法与this"><a href="#call-apply方法与this" class="headerlink" title="call/apply方法与this"></a>call/apply方法与this</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">c, d</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.a + <span class="keyword">this</span>.b + c + d;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> o = &#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">3</span>&#125;;</div><div class="line"></div><div class="line"><span class="comment">// call接收参数列表.</span></div><div class="line">add.call(o, <span class="number">5</span>, <span class="number">7</span>); <span class="comment">// 1 + 3 + 5 + 7 = 16</span></div><div class="line"></div><div class="line"><span class="comment">// apply最后一个参数接收数组.</span></div><div class="line">add.apply(o, [<span class="number">10</span>, <span class="number">20</span>]); <span class="comment">// 1 + 3 + 10 + 20 = 34</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log( <span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">this</span>));</div><div class="line">&#125;</div><div class="line"></div><div class="line">bar.call(<span class="number">7</span>); <span class="comment">// "[object Number]"</span></div></pre></td></tr></table></figure>
<h4 id="bind方法与this"><a href="#bind方法与this" class="headerlink" title="bind方法与this"></a>bind方法与this</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.a;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 绑定是将对象&#123;a:"test"&#125;作为函数f的this. 并返回一个新的g对象.</span></div><div class="line"><span class="keyword">var</span> g = f.bind(&#123;<span class="attr">a</span> : <span class="string">"test"</span>&#125;);</div><div class="line"><span class="built_in">console</span>.log(g()); <span class="comment">// test</span></div><div class="line"></div><div class="line"><span class="comment">// g对象并不会因改变对象而改变.</span></div><div class="line"><span class="keyword">var</span> o = &#123;<span class="attr">a</span> : <span class="number">37</span>, <span class="attr">f</span> : f, <span class="attr">g</span> : g&#125;;</div><div class="line"><span class="built_in">console</span>.log(o.f(), o.g()); <span class="comment">// 37, test</span></div></pre></td></tr></table></figure>
<h3 id="函数属性-amp-arguments"><a href="#函数属性-amp-arguments" class="headerlink" title="函数属性 &amp; arguments"></a>函数属性 &amp; arguments</h3><p>foo.name 函数名<br>foo.length 形参个数<br>arguments.length 实参个数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, y, z</span>) </span>&#123;</div><div class="line">  <span class="built_in">arguments</span>.length; <span class="comment">// 2</span></div><div class="line">  <span class="built_in">arguments</span>[<span class="number">0</span>]; <span class="comment">// 1</span></div><div class="line">  <span class="built_in">arguments</span>[<span class="number">0</span>] = <span class="number">10</span>;</div><div class="line">  x; <span class="comment">// change to 10;</span></div><div class="line">  <span class="built_in">arguments</span>[<span class="number">2</span>] = <span class="number">100</span>;</div><div class="line">  z; <span class="comment">// still undefined !!!</span></div><div class="line">  <span class="built_in">arguments</span>.callee === foo; <span class="comment">// true</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">foo(<span class="number">1</span>, <span class="number">2</span>);</div><div class="line">foo.length; <span class="comment">// 3</span></div><div class="line">foo.name; <span class="comment">// "foo"</span></div></pre></td></tr></table></figure></p>
<p><strong> apply/call第一个参数作为函数this对象; 若为null或undefined时, 函数的this为全局的window对象. </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(x, y, <span class="keyword">this</span>);</div><div class="line">&#125;</div><div class="line">foo.call(<span class="number">100</span>, <span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 1, 2, Number(100)</span></div><div class="line">foo.apply(<span class="literal">true</span>, [<span class="number">3</span>, <span class="number">4</span>]); <span class="comment">// 3, 4, Boolean(true)</span></div><div class="line">foo.apply(<span class="literal">null</span>); <span class="comment">// undefined, undefined, window</span></div><div class="line">foo.apply(<span class="literal">undefined</span>); <span class="comment">// undefined, undefined, window</span></div></pre></td></tr></table></figure></p>
<p><strong> 严格模式下, 第一个参数不会变为默认window对象. </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line"><span class="meta">  'use strict'</span>;</div><div class="line">  <span class="built_in">console</span>.log(x, y, <span class="keyword">this</span>);</div><div class="line">&#125;</div><div class="line">foo.apply(<span class="literal">null</span>); <span class="comment">// undefined, undefined, null</span></div><div class="line">foo.apply(<span class="literal">undefined</span>); <span class="comment">// undefined, undefined, undefined</span></div></pre></td></tr></table></figure></p>
<h3 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h3><h4 id="bind方法"><a href="#bind方法" class="headerlink" title="bind方法"></a>bind方法</h4><p><em>* 函数对象的绑定方法是将第一个参数作为函数的this. 并返回一个新的g函数对象. </em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.x = <span class="number">9</span>;</div><div class="line"><span class="keyword">var</span> <span class="built_in">module</span> = &#123;</div><div class="line">  x: <span class="number">81</span>,</div><div class="line">  getX: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.x; &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.getX(); <span class="comment">// 81; getX的this是module.</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> getX = <span class="built_in">module</span>.getX;</div><div class="line">getX(); <span class="comment">// 9; getX的this是window.</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> boundGetX = getX.bind(<span class="built_in">module</span>);</div><div class="line">boundGetX(); <span class="comment">// 81; bind后getX的this是bind的第一个参数module对象.</span></div></pre></td></tr></table></figure></p>
<h4 id="bind与currying"><a href="#bind与currying" class="headerlink" title="bind与currying"></a>bind与currying</h4><p><em>* 当第一个参数为null时, 仅改变了参数的绑定. 这样的话就指定了默认的配置 </em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getConfig</span>(<span class="params">colors, size, otherOptions</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(colors, size, otherOptions);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> defaultConfig = getConfig.bind(<span class="literal">null</span>, <span class="string">"#CC0000"</span>, <span class="string">"1024 * 768"</span>);</div><div class="line">defaultConfig(<span class="string">"123"</span>); <span class="comment">// #CC0000 1024 * 768 123</span></div><div class="line">defaultConfig(<span class="string">"456"</span>); <span class="comment">// #CC0000 1024 * 768 456</span></div></pre></td></tr></table></figure></p>
<h4 id="bind与new"><a href="#bind与new" class="headerlink" title="bind与new"></a>bind与new</h4><p><strong> new创建对象时, 会忽略构造器的return 返回值. </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.b = <span class="number">100</span>;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.a;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> func = foo.bind(&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;);</div><div class="line"></div><div class="line">func(); <span class="comment">// 1</span></div><div class="line"><span class="keyword">new</span> func(); <span class="comment">// &#123;b : 100&#125;</span></div></pre></td></tr></table></figure></p>
<h4 id="bind方法模拟"><a href="#bind方法模拟" class="headerlink" title="bind方法模拟"></a>bind方法模拟</h4><p>** bind方法是ES5才提供的, 之前是没有的.”</p>
<p><em> 在低版本上模拟bind方法实现 </em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (!<span class="built_in">Function</span>.prototype.bind) &#123;</div><div class="line">  <span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span>(<span class="params">oThis</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span> !== <span class="string">'function'</span>) &#123;</div><div class="line">      <span class="comment">// closest thing possible to the ECMAScript 5</span></div><div class="line">      <span class="comment">// internal IsCallable function</span></div><div class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'What is trying to be bound is not callable'</span>);</div><div class="line">    &#125;</div><div class="line">  </div><div class="line">  <span class="keyword">var</span> aArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>),</div><div class="line">  fToBind = <span class="keyword">this</span>,</div><div class="line">  fNOP = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</div><div class="line">  fBound = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> fToBind.apply(<span class="keyword">this</span> <span class="keyword">instanceof</span> fNOP? <span class="keyword">this</span> : oThis,</div><div class="line">        aArgs.concat(<span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>)));</div><div class="line">  &#125;;</div><div class="line">  fNOP.prototype = <span class="keyword">this</span>.prototype;</div><div class="line">  fBound.prototype = <span class="keyword">new</span> fNOP();</div><div class="line">  </div><div class="line">  <span class="keyword">return</span> fBound;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>在计算机科学中，闭包（也称词法闭包或函数闭包）是指一个函数或函数的引用，与一个引用环境绑定在一起。这<br>个引用环境是一个存储该函数每个非局部变量（也叫自由变量）的表。<br>闭包，不同于一般的函数，它允许一个函数在立即词法作用域外调用时，仍可访问非本地变量。<br>from 维基百科</p>
<h4 id="实用例子"><a href="#实用例子" class="headerlink" title="实用例子"></a>实用例子</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"> <span class="keyword">var</span> localData = <span class="string">"localData here"</span>;</div><div class="line">  <span class="built_in">document</span>.addEventListener(<span class="string">'click'</span>,</div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(localData);</div><div class="line">   &#125;);</div><div class="line">&#125;();</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"> <span class="keyword">var</span> localData = <span class="string">"localData here"</span>;</div><div class="line">  <span class="keyword">var</span> url = <span class="string">"http://www.baidu.com/"</span>;</div><div class="line">  $.ajax(&#123;</div><div class="line">    url : url,</div><div class="line">    success : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="comment">// do sth...</span></div><div class="line">      <span class="built_in">console</span>.log(localData);</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line">&#125;();</div></pre></td></tr></table></figure>
<h4 id="闭包-常见错误之循环闭包"><a href="#闭包-常见错误之循环闭包" class="headerlink" title="闭包-常见错误之循环闭包"></a>闭包-常见错误之循环闭包</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.body.innerHTML = <span class="string">"&lt;div id=div1&gt;aaa&lt;/div&gt;"</span> + <span class="string">"&lt;div id=div2&gt;bbb&lt;/div&gt;&lt;div id=div3&gt;ccc&lt;/div&gt;"</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="number">4</span>; i++) &#123;</div><div class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'div'</span> + i).</div><div class="line">    addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      alert(i); <span class="comment">// all are 4!</span></div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong> 正确在循环中使用 </strong> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="number">4</span>; i++) &#123;</div><div class="line">  !<span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'div'</span> + i).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      alert(i); <span class="comment">// 1, 2, 3</span></div><div class="line">    &#125;);</div><div class="line">  &#125;(i);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="闭包-封装"><a href="#闭包-封装" class="headerlink" title="闭包-封装"></a>闭包-封装</h4><p><em>* 由于函数中的局部变量在函数执行完成后销毁了. 通过闭包函数持有局部变量, 即可将变量隐藏起来, 只能通过返回的闭包去访问变量. </em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 立即执行函数</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> _userId = <span class="number">23492</span>;</div><div class="line">  <span class="keyword">var</span> _typeId = <span class="string">'item'</span>;</div><div class="line">  <span class="keyword">var</span> <span class="keyword">export</span> = &#123;&#125;;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">converter</span>(<span class="params">userId</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> +userId;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">export</span>.getUserId = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> converter(_userId);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">export</span>.getTypeId = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> _typeId;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// 向外暴露export对象. </span></div><div class="line">  <span class="built_in">window</span>.export = <span class="keyword">export</span>;</div><div class="line">&#125;());</div><div class="line"></div><div class="line"><span class="keyword">export</span>.getUserId(); <span class="comment">// 23492</span></div><div class="line"><span class="keyword">export</span>.getTypeId(); <span class="comment">// item</span></div><div class="line"><span class="keyword">export</span>._userId; <span class="comment">// undefined</span></div><div class="line"><span class="keyword">export</span>._typeId; <span class="comment">// undefined</span></div><div class="line"><span class="keyword">export</span>.converter; <span class="comment">// undefined</span></div></pre></td></tr></table></figure></p>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><p><strong> <em> JavaScript是没有块级作用域</em> </strong></p>
<p><em> JavaScript作用域包括: </em></p>
<ul>
<li>全局</li>
<li>函数</li>
<li>eval <code>eval(&quot;var a = 1;&quot;);</code></li>
</ul>
<p>利用函数作用域封装<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// () 和 ! 可以将函数作为表达式来处理.</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// do sth here</span></div><div class="line">  <span class="keyword">var</span> a, b;</div><div class="line">&#125;)();</div><div class="line"></div><div class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="comment">// do sth here</span></div><div class="line">  <span class="keyword">var</span> a, b;</div><div class="line">&#125;();</div></pre></td></tr></table></figure></p>
<p><em> Function构造函数中不能访问局部变量 </em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> i = <span class="number">1</span>;</div><div class="line">  <span class="keyword">var</span> func = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"console.log(typeof i);"</span>);</div><div class="line">  func(); <span class="comment">// undefined</span></div><div class="line">&#125;</div><div class="line">outer(); <span class="comment">// undefined</span></div></pre></td></tr></table></figure></p>
<h3 id="ES3执行上下文-Execution-Context"><a href="#ES3执行上下文-Execution-Context" class="headerlink" title="ES3执行上下文 Execution Context"></a>ES3执行上下文 Execution Context</h3><p><strong> 抽象概念：执行上下文、变量对象…在ECMA-262 第三版标准规范中定义 </strong></p>
<p><em> JS解释器如何找到我们定义的函数和变量？ </em></p>
<p>变量对象(Variable Object, 缩写为VO)是一个抽象概念中的“对象”，它用于存储执行上下文中的：</p>
<ol>
<li>变量</li>
<li>函数声明</li>
<li>函数参数</li>
</ol>
<h4 id="执行上下文与变量对象"><a href="#执行上下文与变量对象" class="headerlink" title="执行上下文与变量对象"></a>执行上下文与变量对象</h4><p><em> 全局上下文的this在浏览器中是window, 在NodeJs中是global对象. </em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># 执行上下文与变量对象的定义:</div><div class="line">activeExecutionContext = &#123;</div><div class="line">  VO : &#123;</div><div class="line">    data_var,</div><div class="line">    data_func_declaration,</div><div class="line">    data_func_arguments</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">GlobalContextVO =&gt; (VO === <span class="keyword">this</span> === global)</div></pre></td></tr></table></figure></p>
<p><strong>例子:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> b = <span class="number">20</span>;</div><div class="line">&#125;</div><div class="line">test(<span class="number">30</span>);</div></pre></td></tr></table></figure></p>
<p><strong>解析:</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">VO(globalContext) = &#123;</div><div class="line">  a : <span class="number">10</span>,</div><div class="line">  test : &lt;ref to function&gt;</div><div class="line">&#125;;</div><div class="line">// 当执行test(30)后的test函数的执行上下文:</div><div class="line">VO(test functionContext) = &#123;</div><div class="line">  x : 30,</div><div class="line">  b: 20</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h4 id="全局执行上下文"><a href="#全局执行上下文" class="headerlink" title="全局执行上下文"></a>全局执行上下文</h4><p><strong> JS在初始化时, 就会将Math String window …放入到全局的VO对象中. 当调用时其实就是访问全局的VO对象中对应的值 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">VO(globalContext) === [[global]];</div><div class="line"></div><div class="line">[[global]] = &#123;</div><div class="line">  <span class="built_in">Math</span> : &lt;...&gt;,</div><div class="line">  String : &lt;...&gt;,</div><div class="line">  isNaN : function() &#123;[Native Code]&#125;</div><div class="line">  ...</div><div class="line">  ...</div><div class="line">  window : global // applied by browser(host)</div><div class="line">&#125;;</div><div class="line"></div><div class="line">GlobalContextVO (VO === this === globa</div><div class="line"></div><div class="line">String(10); //[[global]].String(10);</div><div class="line">window.a = 10; // [[global]].window.a = 10</div><div class="line">this.b = 20; // [[global]].b = 20;</div></pre></td></tr></table></figure></p>
<h4 id="函数中的激活对象"><a href="#函数中的激活对象" class="headerlink" title="函数中的激活对象"></a>函数中的激活对象</h4><p><strong> 函数的激活对象是函数调用时会有一个arguments参数</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">VO(functionContext) === AO;</div><div class="line"></div><div class="line">AO = &#123;</div><div class="line">  <span class="built_in">arguments</span> : &lt;Arg0&gt;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">arguments = &#123;</div><div class="line">  callee,</div><div class="line">  length,</div><div class="line">  properties-indexes</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="变量初始化阶段"><a href="#变量初始化阶段" class="headerlink" title="变量初始化阶段"></a>变量初始化阶段</h4><p><em>* <em> VO按照如下顺序填充: </em> </em></p>
<ol>
<li>函数参数 (若未传⼊入，初始化该参数值为undefined) <code>把函数的参数放到VO中</code></li>
<li>函数声明 (若发⽣生命名冲突，会覆盖) <code>将内部的函数d声明放到VO中</code></li>
<li>变量声明 (初始化变量值为undefined，若发⽣生命名冲突，会忽略。) <code>将函数中的变量声明放到VO中</code></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line"> <span class="keyword">var</span> c = <span class="number">10</span>;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">  <span class="keyword">var</span> e = <span class="function"><span class="keyword">function</span> <span class="title">_e</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">  (<span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params"></span>) </span>&#123;&#125;);</div><div class="line">  b = <span class="number">20</span>;</div><div class="line">&#125;</div><div class="line">test(<span class="number">10</span>);</div><div class="line"></div><div class="line">AO(test) = &#123;</div><div class="line">  a: <span class="number">10</span>,</div><div class="line">  b: <span class="literal">undefined</span>,</div><div class="line">  c: <span class="literal">undefined</span>,</div><div class="line">  d: &lt;ref to func "d"&gt;</div><div class="line">  e: undefined</div><div class="line">&#125;;</div><div class="line">// 函数表达式不会影响VO</div><div class="line">// _e函数名不会影响到VO</div></pre></td></tr></table></figure>
<p><strong> 例子 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 函数声明覆盖了参数x</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, y, z</span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params"></span>)</span>&#123;&#125;; alert(x);&#125; foo(<span class="number">100</span>); </div><div class="line"><span class="comment">// alert: function x()&#123;&#125;</span></div><div class="line"></div><div class="line"><span class="comment">// var func; 变量声明被忽略;</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, y, z</span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>)</span>&#123;&#125;; <span class="keyword">var</span> func; <span class="built_in">console</span>.log(func);&#125; foo(<span class="number">100</span>);</div><div class="line"><span class="comment">// ƒ func()&#123;&#125;</span></div><div class="line"></div><div class="line"><span class="comment">// var func=1; 为函数对象func重新赋值为1; 所以输出为1;</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x, y, z</span>)</span>&#123;<span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>)</span>&#123;&#125;; <span class="keyword">var</span> func = <span class="number">1</span>; <span class="built_in">console</span>.log(func);&#125; foo(<span class="number">100</span>);</div><div class="line"><span class="comment">// 1</span></div></pre></td></tr></table></figure></p>
<h4 id="代码执行阶段"><a href="#代码执行阶段" class="headerlink" title="代码执行阶段"></a>代码执行阶段</h4><p><strong> 执行代码 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a, b</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> c = <span class="number">10</span>;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">  <span class="keyword">var</span> e = <span class="function"><span class="keyword">function</span> <span class="title">_e</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">  (<span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params"></span>) </span>&#123;&#125;);</div><div class="line">  b = <span class="number">20</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">test(<span class="number">10</span>);</div></pre></td></tr></table></figure></p>
<p><strong> 初始化阶段 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">AO(test) = &#123;</div><div class="line"> a: <span class="number">10</span>,</div><div class="line"> b: <span class="literal">undefined</span>,</div><div class="line"> c: <span class="literal">undefined</span>,</div><div class="line"> d: &lt;ref to func "d"&gt;</div><div class="line"> e: undefined</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><strong> 执行阶段 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">VO[<span class="string">'c'</span>] = <span class="number">10</span>;</div><div class="line">VO[<span class="string">'e'</span>] = <span class="function"><span class="keyword">function</span> <span class="title">_e</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">VO[<span class="string">'b'</span>] = <span class="number">20</span>;</div><div class="line"></div><div class="line">AO(test) = &#123;</div><div class="line">  a: <span class="number">10</span>,</div><div class="line">  b: <span class="number">20</span>,</div><div class="line">  c: <span class="number">10</span>,</div><div class="line">  d: &lt;reference to FunctionDeclaration "d"&gt;</div><div class="line">  e: function _e() &#123;&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h4 id="例子-2"><a href="#例子-2" class="headerlink" title="例子"></a>例子</h4><p><em> 代码如下: </em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">alert(x); <span class="comment">// function</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</div><div class="line">alert(x); <span class="comment">// 10</span></div><div class="line">x = <span class="number">20</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">alert(x); <span class="comment">// 20</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</div><div class="line">  <span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">  <span class="keyword">var</span> b = <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">alert(a); <span class="comment">// 1</span></div><div class="line">alert(b); <span class="comment">// undefined</span></div></pre></td></tr></table></figure></p>
<p><em>  变量初始化阶段步骤: </em></p>
<ol>
<li>函数参数: 由于是在全局环境中, 忽略此步</li>
<li>函数声明: 将function x声明放入VO中</li>
<li>变量声明: 将var声明的变量都前置放入到全局的global VO变量中, 并初始化为undefined; 由于var x与函数x冲而被忽略.</li>
</ol>
<p><em>  执行阶段 </em></p>
<ol>
<li>alert(x); 在VO中x是声明的函数对象.</li>
<li>x = 10; 将VO中的x改变为Number(10)</li>
<li>alert(x); 输出number(10)</li>
<li>var a = 1; 为变量a赋值为1;</li>
<li>alert(b); b声明了但并未赋值, 所以仍为undefined</li>
</ol>
<h2 id="OOP"><a href="#OOP" class="headerlink" title="OOP"></a>OOP</h2><p><strong> 面向对象程序设计(Object-oriented programming OOP)是一种程序设计范型，同时也是一种程序开发的方法。对象指的是类的实例，它将对象作为程序的基本单元，将程序和数据封装其中，以提高软件的重用性，灵活性和扩展性。 来自于 —-维基百科 </strong> </p>
<h3 id="概念与实现继承方式"><a href="#概念与实现继承方式" class="headerlink" title="概念与实现继承方式"></a>概念与实现继承方式</h3><p><strong> <em> 实现继承的方式: </em> </strong></p>
<ol>
<li>创建一个原型是Person.prototype的新对象, 作为Student的原型, 如此Student既继承了Person原型上的属性和方法, 又可扩展这个新对象,实现对Student原型的定制.<br>Student.prototype = Object.create(Person.prototype);</li>
<li>改变Student原型上的构造器. 否则仍为从Person原型上继承的.<br>Person.Student.prototype.constructor = Student;</li>
</ol>
<p><strong> Object.create()是ES5之后才支持的，在es5之前我们可以写一个模拟的方法. </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (!<span class="built_in">Object</span>.create) &#123;</div><div class="line">    <span class="built_in">Object</span>.create = <span class="function"><span class="keyword">function</span>(<span class="params">proto</span>) </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">        F.prototype = proto;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> F();</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p><strong> 通过指定父类的实例为子类的原型实现继承 (不推荐,  new per()在构造器的操作是没有意义的)</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">per</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sor</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">sor.prototype = <span class="keyword">new</span> per(); <span class="comment">//per构造器中会有无意义的操作.</span></div><div class="line">sor.prototype.constructor = sor;</div></pre></td></tr></table></figure></p>
<h4 id="基于原型的继承"><a href="#基于原型的继承" class="headerlink" title="基于原型的继承"></a>基于原型的继承</h4><p><img src="http://kityminder-img.gz.bcebos.com/bafaa34ae89c96aea99949e83c79d64365e8b721" alt="基于原型的继承"><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.y = <span class="number">2</span>;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">console</span>.log(Foo.prototype); <span class="comment">//object</span></div><div class="line">Foo.prototype.x = <span class="number">1</span>;</div><div class="line"><span class="keyword">var</span> obj3 = <span class="keyword">new</span> Foo();</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(obj3.y); <span class="comment">//2</span></div><div class="line"><span class="built_in">console</span>.log(obj3.x); <span class="comment">//1</span></div></pre></td></tr></table></figure></p>
<p>函数声明创建Foo()函数，这个函数就会有一个内置的Foo.prototype，并且这个属性是对象，并且是预设的object。<br><img src="http://upload-images.jianshu.io/upload_images/3877962-81f6d095f48ed6dd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Foo.prototype"></p>
<p>当用new去调用函数的时候，那么构造器也就是说这样一个函数就会作为一个构造器来使用，并且this会指向一个对象，而对象的原型会指向构造器的Foo.prototype属性。obj3实际上会成为Foo构造器中的this，最后会作为返回值，并且在构造器里面调用的时候会把y赋值为2，并且obj3的原型，也就是他的proto会指向Foo.prototype内置属性，最后可以看到obj3.y会返回2，obj3.x会返回1，y是这个对象上的直接量，而x是原型链上的，也就是Foo.prototype的<br><img src="http://upload-images.jianshu.io/upload_images/3877962-568a72e297d75aeb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h4 id="prototype属性与原型"><a href="#prototype属性与原型" class="headerlink" title="prototype属性与原型"></a>prototype属性与原型</h4><p><strong> 使用函数声明去中创建一个函数的时候，这个函数就会有一个prototype属性，并且他默认会有两个属性. </strong></p>
<ol>
<li>一个是constructor:Fooconstructor属性会指向它本身Foo。</li>
<li>另外一个属性是<code>__proto__</code>，<code>__proto__</code>是Foo.prototype的原型，那么他的原型会指向Object.prototype也就是说一般的对象比如用花括号括起来的对象字面量，他也会有<code>__proto__</code>他会指向Object.prototype因此Object.prototype上面的一些方法比如说toString，valueOf才会被每一个一般的对象所使用，</li>
</ol>
<h4 id="继承实例"><a href="#继承实例" class="headerlink" title="继承实例"></a>继承实例</h4><p><strong> 继承实例 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">    <span class="keyword">this</span>.age = age;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Person.prototype.hi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Hi my name is'</span> + <span class="keyword">this</span>.name + <span class="string">",I'm"</span> + <span class="keyword">this</span>.age + <span class="string">"years old new"</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Person.prototype.legs_num = <span class="number">2</span>;</div><div class="line">Person.prototype.arms_num = <span class="number">2</span>;</div><div class="line">Person.prototype.walk = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">"is walking..."</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age, className</span>) </span>&#123;</div><div class="line">    Person.call(<span class="keyword">this</span>, name, age);</div><div class="line">    <span class="keyword">this</span>.className = className;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">//实现继承的方法:</span></div><div class="line"><span class="comment">//1. 创建一个原型是Person.prototype的新对象, 作为Student的原型, 如此Student既继承了Person原型上的属性和方法, 又可扩展这个新对象,实现对Student原型的定制.</span></div><div class="line">Student.prototype = <span class="built_in">Object</span>.create(Person.prototype);</div><div class="line"><span class="comment">//2. 改变Student原型上的构造器. 否则仍为从Person原型上继承的Person.</span></div><div class="line">Student.prototype.constructor = Student;</div><div class="line"></div><div class="line">Student.prototype.hi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Hi my name is'</span> + <span class="keyword">this</span>.name + <span class="string">",I'm"</span> + <span class="keyword">this</span>.age + <span class="string">"years old new,and form"</span> + <span class="keyword">this</span>.className + <span class="string">"."</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Student.prototype.learn = <span class="function"><span class="keyword">function</span>(<span class="params">subject</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">'is learing'</span> + subject + <span class="string">'at'</span> + <span class="keyword">this</span>.className + <span class="string">'.'</span>);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(Student.prototype);</div><div class="line"></div><div class="line"><span class="keyword">var</span> t = <span class="keyword">new</span> Student(<span class="string">"黄继鹏"</span>, <span class="number">23</span>, <span class="string">"class2"</span>);</div><div class="line">t.hi();</div><div class="line"><span class="built_in">console</span>.log(t.legs_num);</div><div class="line">t.walk();</div><div class="line">t.learn(<span class="string">'math'</span>)</div></pre></td></tr></table></figure></p>
<h3 id="再谈原型链"><a href="#再谈原型链" class="headerlink" title="再谈原型链"></a>再谈原型链</h3><p><strong> 返回对象原型<code>Object.getPrototypeOf(obj)</code> </strong></p>
<p><img src="http://upload-images.jianshu.io/upload_images/3877962-37d17481b52e9489.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="再谈原型链"></p>
<p>这个图里面说明了上面代码例子的示意图</p>
<p>通过var peng = new Student(“黄继鹏”, 23, “class2”);来创建了一个实例peng。</p>
<p>peng的实例他的原型我们用<strong>proto</strong>表示，就会指向构造器Student.prototype的属性。</p>
<p>Student.prototype上面有hi和learn方法，Student.prototype是通过Student.prototype = Object.create(Person.prototype);构造的，所以说Student.prototype是一个对象，并且的原型指向Person.prototype。</p>
<p>Person.prototype。也给她设置了很多属性，hi…等。</p>
<p>Person.prototype.hi = function() {<br>    console.log(‘Hi my name is’ + this.name + “,I’m” + this.age + “years old new”);<br>};<br>Person.prototype.hi其实是内置的普通对象，内置对象他本身也会有他的原型，他的原型就是Object.prototype。</p>
<p>也就是因为这样所以说随便一个对象才会有hasOwnProperty，valueOf，toString等一些公共的函数，这些函数都是从Object.prototype而来的。</p>
<p>当我们去调用</p>
<p>peng.hi();方法的时候，首先看这个对象上本身有没有hi方法，在本身没有所以会像上查找，差遭到peng原型也就是Student.prototype有这样一个函数方法，所以最终调用的是Student.prototype上面的hi方法。</p>
<p>如果Student.prototype不去写hi方法的时候peng.hi();会去调用Person.prototype.hi这样一个方法，</p>
<p>当我们调用peng.walk();的时候，先找peng上发现没有，然后Student.prototype上面，也没有，Person.prototype有walk所以最终调用结果是Person.prototype上面的walk方法。</p>
<p>那么我想去调用peng.toString的时候也是一层一层向上查找。找到Object.prototype那么最后到null也就是最根源没有了。</p>
<h4 id="特殊情况"><a href="#特殊情况" class="headerlink" title="特殊情况"></a>特殊情况</h4><p><strong> 并不是所有对象最终原型链上最终都有Object.prototype </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj2=<span class="built_in">Object</span>.create(<span class="literal">null</span>);</div><div class="line">obj2.__proto__ <span class="comment">//undefined</span></div><div class="line">obj2.toString() <span class="comment">//undefined</span></div></pre></td></tr></table></figure></p>
<p>obj2.create(null)的作用是创建空对象，并且这个对象的原型指向这样一个参数，但是这里参数是null，obj2这个时候他的原型就是undefined，obj2.toString就是undefined那么通过Object.create(null)创建出来的对象，就没有Object.prototype的一些方法。所以说并不是所有的对象都继承Object.prototype</p>
<p><strong> 并不是所有的函数对象都有prototype这样一个预制属性的 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">abc</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"><span class="built_in">console</span>.log(abc.prototype);</div><div class="line"><span class="keyword">var</span> hh = abc.bind(<span class="literal">null</span>);</div><div class="line"><span class="built_in">console</span>.log(hh.prototype);</div></pre></td></tr></table></figure></p>
<p>使用es5友谊和bind函数，bind函数是用来修改函数在运行时的this的，bind函数返回的也是一个函数，但是bind函数就没有prototype预设属性。</p>
<h3 id="prototype属性"><a href="#prototype属性" class="headerlink" title="prototype属性"></a>prototype属性</h3><p><strong> javascript中的prototype原型，不像java的class，是一旦写好了以后不太容易去动态改变的，但是javascript中原型实际上也是普通的对象，那么意味着在程序运行的阶段我们也可以动态的给prototype添加或者删除一些属性. </strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Student.prototype.x=<span class="number">101</span>;</div><div class="line"><span class="built_in">console</span>.log(peng.x);<span class="comment">//101</span></div><div class="line"></div><div class="line">Student.prototype=&#123;<span class="attr">y</span>:<span class="number">2</span>&#125;;</div><div class="line"><span class="built_in">console</span>.log(peng.y);<span class="comment">//undefined</span></div><div class="line"><span class="built_in">console</span>.log(peng.x);<span class="comment">//101</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> nunnly=<span class="keyword">new</span> Student(<span class="string">"nunnly"</span>, <span class="number">23</span>, <span class="string">"class3"</span>);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(nunnly.y);<span class="comment">//2</span></div><div class="line"><span class="built_in">console</span>.log(nunnly.x);<span class="comment">//undefined</span></div></pre></td></tr></table></figure>
<ol>
<li>通过过Student.prototype.x=101;把huang的原型动态的添加一个属性x那么我们发现所有的实例都会受到影响，</li>
<li>直接修改Student.prototype={y:2};构造器的属性, 并不能修改已经实例化的对象，也就是说已经实例化的peng他的原型已经指向当时的Student.prototype如果你修改了Student.prototype的话，并不会影响已经创建的实例.</li>
<li>但是再去用new重新实例化对象，那么会发现x不见了，并且y是新的y值。</li>
</ol>
<h4 id="内置构造器的prototype"><a href="#内置构造器的prototype" class="headerlink" title="内置构造器的prototype"></a>内置构造器的prototype</h4><p><strong> 为所有的对象都增加一个x属性, 并更改属性配置for…in时不枚举原型上的变量 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.defineProperty(<span class="built_in">Object</span>.prototype, <span class="string">'x'</span>, &#123;<span class="attr">writable</span>: <span class="literal">true</span>,<span class="attr">value</span>: <span class="number">1</span>&#125;);</div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">    y: <span class="number">3</span></div><div class="line">&#125;;</div><div class="line"><span class="built_in">console</span>.log(obj.x); <span class="comment">//1</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</div><div class="line">    <span class="built_in">console</span>.log(key + <span class="string">"="</span> + obj[key]); <span class="comment">//y=3</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<ul>
<li>value:属性的值给属性赋值</li>
<li>writable:如果为false，属性的值就不能被重写。</li>
<li>get: 一旦目标属性被访问就会调回此方法，并将此方法的运算结果返回用户。</li>
<li>set:一旦目标属性被赋值，就会调回此方法。</li>
<li>configurable:如果为false，则任何尝试删除目标属性或修改属性以下特性（writable, configurable, -enumerable）的行为将被无效化。</li>
<li>enumerable:是否能在for…in循环中遍历出来或在Object.keys中列举出来。</li>
</ul>
<h4 id="创建对象-new-原型链"><a href="#创建对象-new-原型链" class="headerlink" title="创建对象-new/原型链"></a>创建对象-new/原型链</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;&#125;    <span class="comment">//定义函数对象 foo</span></div><div class="line">foo.prototype.z = <span class="number">3</span>;      <span class="comment">//函数对象默认带foo.prototype对象属性  这个对象会作为new实例的对象原型  对象添加z属性=3</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> obj =<span class="keyword">new</span> foo();    <span class="comment">//用构造器方式构造新的对象</span></div><div class="line">obj.y = <span class="number">2</span>;    <span class="comment">//通过赋值添加2个属性给obj</span></div><div class="line">obj.x = <span class="number">1</span>;   <span class="comment">//通过new去构造这样一个对象他的主要特点是，他的原型会指向构造器的foo.prototype属性</span></div><div class="line"></div><div class="line"><span class="comment">//一般foo.prototype对象他的原型又会指向Object.prototype</span></div><div class="line"><span class="comment">//Object.prototype他也会有他的原型最后指向null整个原型链的末端</span></div><div class="line"></div><div class="line">obj.x; <span class="comment">// 1  //访问obj.x发现对象上有x返回1</span></div><div class="line">obj.y; <span class="comment">// 2  //访问obj.y发现对象上有x返回2</span></div><div class="line">obj.z; <span class="comment">// 3  //obj上没有z并不会停止查找，会去查找他的原型foo.prototype.z返回3</span></div><div class="line"><span class="keyword">typeof</span> obj.toString; <span class="comment">// ‘function'  这是一个函数，toString是Object.prototype上面的每个对象都有</span></div><div class="line"><span class="string">'z'</span> <span class="keyword">in</span> obj; <span class="comment">// true     obj.z是从foo.prototype继承而来的，所以说obj里面有z</span></div><div class="line">obj.hasOwnProperty(<span class="string">'z'</span>); <span class="comment">// false   表示z并不是obj直接对象上的，而是对象原型链上的。</span></div></pre></td></tr></table></figure>
<h3 id="instanceof-1"><a href="#instanceof-1" class="headerlink" title="instanceof"></a>instanceof</h3><p><strong> instanceof数据类型判断方法 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log([<span class="number">1</span>, <span class="number">2</span>] <span class="keyword">instanceof</span> <span class="built_in">Array</span>); <span class="comment">//true</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Object</span>() <span class="keyword">instanceof</span> <span class="built_in">Array</span>); <span class="comment">//false</span></div><div class="line"></div><div class="line"><span class="string">'1'</span> <span class="keyword">instanceof</span> <span class="built_in">String</span> <span class="comment">//false </span></div><div class="line"><span class="built_in">String</span>(<span class="number">1</span>) <span class="keyword">instanceof</span> <span class="built_in">String</span> <span class="comment">//false</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">String</span>(<span class="number">1</span>) <span class="keyword">instanceof</span> <span class="built_in">String</span> <span class="comment">//true</span></div></pre></td></tr></table></figure></p>
<p><strong>左边要求是一个对象instanceof右边要求是一个函数或者说构造器他会判断右边的构造器的 prototype的属性是否出现在左边这个对象的原型链上。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">per</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sor</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">sor.prototype = <span class="keyword">new</span> per();</div><div class="line">sor.prototype.constructor = sor;</div><div class="line"></div><div class="line"><span class="keyword">var</span> peng = <span class="keyword">new</span> sor();</div><div class="line"><span class="keyword">var</span> han = <span class="keyword">new</span> per();</div><div class="line"><span class="built_in">console</span>.log(peng <span class="keyword">instanceof</span> sor); <span class="comment">//true</span></div><div class="line"><span class="built_in">console</span>.log(peng <span class="keyword">instanceof</span> per); <span class="comment">//true</span></div><div class="line"><span class="built_in">console</span>.log(han <span class="keyword">instanceof</span> sor); <span class="comment">//false</span></div><div class="line"><span class="built_in">console</span>.log(han <span class="keyword">instanceof</span> per); <span class="comment">//true</span></div></pre></td></tr></table></figure>
<h3 id="OOP精碎"><a href="#OOP精碎" class="headerlink" title="OOP精碎"></a>OOP精碎</h3><h4 id="模拟重载"><a href="#模拟重载" class="headerlink" title="模拟重载"></a>模拟重载</h4><p><strong> 模拟重载 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> args = <span class="built_in">arguments</span>;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> args[<span class="number">0</span>] === <span class="string">'object'</span> &amp;&amp; args[<span class="number">0</span>]) &#123;</div><div class="line">        <span class="keyword">if</span> (args[<span class="number">0</span>].name) &#123;</div><div class="line">            <span class="keyword">this</span>.name = args[<span class="number">0</span>].name;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (args[<span class="number">0</span>].age) &#123;</div><div class="line">            <span class="keyword">this</span>.age = args[<span class="number">0</span>].age;</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">if</span> (args[<span class="number">0</span>]) &#123;</div><div class="line">            <span class="keyword">this</span>.name = args[<span class="number">0</span>];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (args[<span class="number">1</span>]) &#123;</div><div class="line">            <span class="keyword">this</span>.age = args[<span class="number">1</span>];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">person.prototype.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="string">"姓名:"</span> + <span class="keyword">this</span>.name + <span class="string">"年龄:"</span> + <span class="keyword">this</span>.age</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> peng = <span class="keyword">new</span> person(&#123;</div><div class="line">    name: <span class="string">"继小鹏"</span>,</div><div class="line">    age: <span class="number">23</span></div><div class="line">&#125;);</div><div class="line"><span class="built_in">console</span>.log(peng.toString()); <span class="comment">//姓名:继小鹏年龄:23</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> peng1 = <span class="keyword">new</span> person(<span class="string">"是你"</span>, <span class="number">23</span>);</div><div class="line"><span class="built_in">console</span>.log(peng1.toString()); <span class="comment">//姓名:是你年龄:23</span></div></pre></td></tr></table></figure></p>
<h4 id="调用父类方法和子类重载父类方法"><a href="#调用父类方法和子类重载父类方法" class="headerlink" title="调用父类方法和子类重载父类方法"></a>调用父类方法和子类重载父类方法</h4><p><strong> 调用父类方法和子类重载父类方法 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;<span class="comment">//基类</span></div><div class="line">    <span class="keyword">this</span>.name=name;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name,classname</span>)</span>&#123;   <span class="comment">//学生类</span></div><div class="line">    <span class="keyword">this</span>.classname=classname;</div><div class="line">    <span class="comment">//子类调用父类的方法.</span></div><div class="line">    person.call(<span class="keyword">this</span>,name);</div><div class="line">&#125;</div><div class="line"></div><div class="line">Student.prototype = <span class="built_in">Object</span>.create(Person.prototype);</div><div class="line">Student.prototype.constructor = Student;</div><div class="line"></div><div class="line">Person.prototype.init=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line"></div><div class="line"><span class="comment">//子类重载父类的init方法</span></div><div class="line">Student.prototype.init=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="comment">//子类实现中调用父类的方法.</span></div><div class="line">  Person.prototype.init.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="链式调用"><a href="#链式调用" class="headerlink" title="链式调用"></a>链式调用</h4><p><strong> 链式调用 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">classman</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"><span class="comment">//给classman构造器prototype添加addClass属性方法</span></div><div class="line">classman.prototype.addClass = <span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'calss'</span> + str + <span class="string">'added'</span>);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">    <span class="comment">//return this表示返回classman的实例因为返回了实例那么紧接着后面不需要加mang.ad</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> mang = <span class="keyword">new</span> classman();</div><div class="line">mang.addClass(<span class="string">'classA'</span>).addClass(<span class="string">'classB'</span>).addClass(<span class="string">'classC'</span>)</div><div class="line"></div><div class="line"><span class="comment">// calssclassAadded</span></div><div class="line"><span class="comment">// calssclassBadded</span></div><div class="line"><span class="comment">// calssclassCadded</span></div></pre></td></tr></table></figure></p>
<h4 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h4><p><strong> 抽象类 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Detectorlse</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Abstract class can not be invoked directly!"</span>);</div><div class="line">&#125;</div><div class="line">Detectorlse.detect = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Detcetion starting...'</span>);</div><div class="line">&#125;</div><div class="line">Detectorlse.stop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Detector stopped'</span>);</div><div class="line">&#125;</div><div class="line">Detectorlse.init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Error"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">linkDetector</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">linkDetector.prototype = <span class="built_in">Object</span>.create(Detectorlse.prototype)</div><div class="line">linkDetector.prototype.constructor = linkDetector;</div><div class="line"></div><div class="line"><span class="comment">//...add methods to LinkDetector...</span></div></pre></td></tr></table></figure></p>
<h4 id="defineProperty-ES5"><a href="#defineProperty-ES5" class="headerlink" title="defineProperty(ES5)"></a>defineProperty(ES5)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="built_in">Object</span>.defineProperty(<span class="keyword">this</span>, <span class="string">'name'</span>, &#123;</div><div class="line">        value: name,</div><div class="line">        enumerable: <span class="literal">true</span></div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line"><span class="built_in">Object</span>.defineProperty(Person, <span class="string">'arms_num'</span>, &#123;</div><div class="line">    value: <span class="number">2</span>,</div><div class="line">    enumerable: <span class="literal">true</span></div><div class="line">&#125;);</div><div class="line"><span class="built_in">Object</span>.seal(Person.prototype);</div><div class="line"><span class="built_in">Object</span>.seal(Person);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">student</span>(<span class="params">name, classname</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.classname = classname;</div><div class="line">    Person.call(<span class="keyword">this</span>, name);</div><div class="line">&#125;;</div><div class="line">student.prototype = <span class="built_in">Object</span>.create(Person.prototype);</div><div class="line">student.prototype.constructor = student;</div></pre></td></tr></table></figure>
<h4 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h4><p><strong> 定义简单模块化 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> moduleA;</div><div class="line">moduleA=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> prop=<span class="number">1</span>;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>)</span>&#123;&#125;;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        func:func,</div><div class="line">        prop:prop</div><div class="line">    &#125;</div><div class="line">&#125;();</div></pre></td></tr></table></figure></p>
<p><strong> 定义简单模块化2 </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> moduleA;</div><div class="line">moduleA = <span class="keyword">new</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> prop = <span class="number">1</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">    <span class="keyword">this</span>.func = func;</div><div class="line">    <span class="keyword">this</span>.prop = prop;</div><div class="line">&#125;();</div></pre></td></tr></table></figure></p>
<h3 id="实践（探测器）"><a href="#实践（探测器）" class="headerlink" title="实践（探测器）"></a>实践（探测器）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">global</span>) </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">DetectorBase</span>(<span class="params">configs</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span> <span class="keyword">instanceof</span> DetectorBase) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Do not invoke without new.'</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.configs = configs;</div><div class="line">        <span class="keyword">this</span>.analyze();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    DetectorBase.prototype.detect = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Not implemented'</span>);</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    DetectorBase.prototype.analyze = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'analyze...'</span>);</div><div class="line">        <span class="keyword">this</span>.data = <span class="string">"###data###"</span>;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">LinkDetector</span>(<span class="params">links</span>) </span>&#123;</div><div class="line">        DetectorBase.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</div><div class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span> <span class="keyword">instanceof</span> LinkDetector) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Do not invoke without new.'</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.links = links;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">ContainerDetector</span>(<span class="params">containers</span>) </span>&#123;</div><div class="line">        DetectorBase.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</div><div class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span> <span class="keyword">instanceof</span> ContainerDetector) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Do not invoke without new.'</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.containers = containers;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// inherit first</span></div><div class="line">    inherit(LinkDetector, DetectorBase);</div><div class="line">    inherit(ContainerDetector, DetectorBase);</div><div class="line"></div><div class="line">    <span class="comment">// expand later</span></div><div class="line">    LinkDetector.prototype.detect = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Loading data:'</span> + <span class="keyword">this</span>.data);</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'link detection started.'</span>);</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Scaning links:'</span> + <span class="keyword">this</span>.links);</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    ContainerDetector.prototype.detect = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Loading data:'</span> + <span class="keyword">this</span>.data);</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'link detection started.'</span>);</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'Scaning containers:'</span> + <span class="keyword">this</span>.containers);</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="comment">// prevent from being altered</span></div><div class="line">    <span class="built_in">Object</span>.freeze(DetectorBase);</div><div class="line">    <span class="built_in">Object</span>.freeze(DetectorBase.prototype);</div><div class="line">    <span class="built_in">Object</span>.freeze(LinkDetector);</div><div class="line">    <span class="built_in">Object</span>.freeze(LinkDetector.prototype);</div><div class="line">    <span class="built_in">Object</span>.freeze(ContainerDetector);</div><div class="line">    <span class="built_in">Object</span>.freeze(ContainerDetector.prototype);</div><div class="line"></div><div class="line">    <span class="comment">// export to global object</span></div><div class="line">    <span class="built_in">Object</span>.defineProperties(global, &#123;</div><div class="line">        LinkDetector: &#123; <span class="attr">value</span>: LinkDetector &#125;,</div><div class="line">        ContainerDetector: &#123; <span class="attr">value</span>: ContainerDetector &#125;,</div><div class="line">        DetectorBase: &#123; <span class="attr">value</span>: DetectorBase &#125;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">inherit</span>(<span class="params">subClass, superClass</span>) </span>&#123;</div><div class="line">        subClass.prototype = <span class="built_in">Object</span>.create(superClass.prototype);</div><div class="line">        subClass.prototype.constructor = subClass;</div><div class="line">    &#125;</div><div class="line">&#125;(<span class="keyword">this</span>));</div><div class="line"></div><div class="line"><span class="keyword">var</span> containerDetector = <span class="keyword">new</span> ContainerDetector(<span class="string">'#nav #banner #sidebar'</span>);</div><div class="line">containerDetector.detect();</div><div class="line"></div><div class="line"><span class="keyword">var</span> linkDetector = <span class="keyword">new</span> LinkDetector(<span class="string">'https://www.alipay.com https://www.aliyun.com'</span>);</div><div class="line">linkDetector.detect();</div></pre></td></tr></table></figure>
<h2 id="正则与模式匹配"><a href="#正则与模式匹配" class="headerlink" title="正则与模式匹配"></a>正则与模式匹配</h2><p><strong> 正则表达式(regular expression)是一个描述字符模式的对象。ECMAScript的RegExp类表示正则表达式，而String和RegExp都定义了使用正则表达式进行强大的模式匹配和文本检索与替换的函数。</strong></p>
<p>一个简单的例子<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">/\d\d\d/.test(<span class="string">"123"</span>); <span class="comment">//true</span></div><div class="line">/\d\d\d/.test(<span class="string">"abc"</span>); <span class="comment">//false</span></div><div class="line"><span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"Bosn"</span>).test(<span class="string">"Hi, Bosn"</span>); <span class="comment">//true</span></div></pre></td></tr></table></figure></p>
<p><img src="http://pclib.github.io/safari/program/javascript-the-definitive-guide-cn/OEBPS/Images/image00755.jpeg" alt=""></p>
<p><img src="http://pclib.github.io/safari/program/javascript-the-definitive-guide-cn/OEBPS/Images/image00756.jpeg" alt=""></p>
<p><img src="http://pclib.github.io/safari/program/javascript-the-definitive-guide-cn/OEBPS/Images/image00757.jpeg" alt=""></p>
<p><img src="http://pclib.github.io/safari/program/javascript-the-definitive-guide-cn/OEBPS/Images/image00758.jpeg" alt=""></p>
<p><img src="http://pclib.github.io/safari/program/javascript-the-definitive-guide-cn/OEBPS/Images/image00759.jpeg" alt=""></p>
<p><img src="http://pclib.github.io/safari/program/javascript-the-definitive-guide-cn/OEBPS/Images/image00760.jpeg" alt=""></p>
<h3 id="三个flag"><a href="#三个flag" class="headerlink" title="三个flag"></a>三个flag</h3><p><strong> <em> global ignoreCase multiline </em> </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/abc/gim.test(<span class="string">"ABC"</span>); <span class="comment">//true</span></div><div class="line"><span class="built_in">RegExp</span>(<span class="string">"abc"</span>, <span class="string">"mgi"</span></div></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>i</td>
<td>执行对大小写不敏感的匹配。</td>
</tr>
<tr>
<td>g</td>
<td>执行全局匹配（查找所有匹配而非在找到第一个匹配后停止）。</td>
</tr>
<tr>
<td>m</td>
<td>执行多行匹配。</td>
</tr>
</tbody>
</table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">var</span> reg1 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"lisong"</span>,<span class="string">'ig'</span>);</div><div class="line"><span class="keyword">var</span> reg2 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"lisong"</span>);</div><div class="line"><span class="keyword">var</span> reg3 = <span class="regexp">/lisong/ig</span>;</div><div class="line"><span class="keyword">var</span> reg4 = <span class="regexp">/lisong/</span>;</div></pre></td></tr></table></figure>
<h3 id="RegExp对象的属性"><a href="#RegExp对象的属性" class="headerlink" title="RegExp对象的属性"></a>RegExp对象的属性</h3><p><strong> <em> global ignoreCase multiline source </em> </strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">/abc/g.global  <span class="comment">//true</span></div><div class="line">/abc/g.ignoreCase  <span class="comment">//false</span></div><div class="line">/abc/g.multiline  <span class="comment">//false</span></div><div class="line">/abc/g.source  <span class="comment">//"abc"</span></div></pre></td></tr></table></figure></p>
<h3 id="RegExp-对象的方法"><a href="#RegExp-对象的方法" class="headerlink" title="RegExp 对象的方法"></a>RegExp 对象的方法</h3><p><em>* <em> compile, exec, test, toString </em> </em><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/abc/.exec(<span class="string">"abcdef"</span>);  <span class="comment">//"abc"</span></div><div class="line">/abc/.test(<span class="string">"abcde"</span>);  <span class="comment">//true</span></div><div class="line">/abc/.toString();  <span class="comment">//"/abc/"</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> reg = <span class="regexp">/abc/</span>; </div><div class="line">reg.compile(<span class="string">"def"</span>);</div><div class="line">reg.test(<span class="string">"def"</span>); <span class="comment">//true</span></div></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
<th>FF</th>
<th>IE</th>
</tr>
</thead>
<tbody>
<tr>
<td>compile</td>
<td>编译正则表达式。</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>exec</td>
<td>检索字符串中指定的值。返回找到的值，并确定其位置。</td>
<td>1</td>
<td>4</td>
</tr>
<tr>
<td>test</td>
<td>检索字符串中指定的值。返回 true 或 false。</td>
<td>1</td>
<td>4</td>
</tr>
</tbody>
</table>
<h3 id="RegExp静态属性"><a href="#RegExp静态属性" class="headerlink" title="RegExp静态属性"></a>RegExp静态属性</h3><p><img src="http://img.blog.csdn.net/20170202215754180?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYTQwOTA1MTk4Nw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> str = <span class="string">"123abc456lisong789hehe"</span>;</div><div class="line">	<span class="keyword">var</span> regExp = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"[a-z]+(\\d+)"</span>,<span class="string">"g"</span>);</div><div class="line">	<span class="built_in">console</span>.log( regExp.exec(str) ); <span class="comment">//["abc456", "456", index: 3, input: "123abc456lisong789hehe"]</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.input); <span class="comment">//123abc456lisong789hehe</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.leftContext); <span class="comment">//123</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.rightContext); <span class="comment">//lisong789hehe</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.lastMatch); <span class="comment">//abc456</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.lastParen); <span class="comment">//456</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.multiline); <span class="comment">//false</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">"-------------------------------"</span>)</div><div class="line">	<span class="built_in">console</span>.log( regExp.exec(str) ); <span class="comment">//["lisong789", "789", index: 9, input: "123abc456lisong789hehe"]</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.leftContext); <span class="comment">//123abc456</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.rightContext); <span class="comment">//hehe</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.lastMatch); <span class="comment">//lisong789</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.lastParen); <span class="comment">//789</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="string">"-------------------------------"</span>)</div><div class="line">	<span class="keyword">var</span> regExp2 = <span class="regexp">/lisong/</span>;</div><div class="line">	regExp2.test(<span class="string">"123lisong456"</span>);</div><div class="line">	<span class="built_in">console</span>.log( regExp.exec(str) ); <span class="comment">//null,如果没匹配到不会改变静态属性</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.leftContext); <span class="comment">//123abc456</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.rightContext); <span class="comment">//hehe</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.lastMatch); <span class="comment">//abc456</span></div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.lastParen); <span class="comment">//789</span></div></pre></td></tr></table></figure></p>
<h3 id="String类型与正则相关的方法"><a href="#String类型与正则相关的方法" class="headerlink" title="String类型与正则相关的方法"></a>String类型与正则相关的方法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">String</span>.prototype.search</div><div class="line"><span class="string">"abcabcdef"</span>.search(<span class="regexp">/(abc)\1/</span>);  <span class="comment">//0</span></div><div class="line"></div><div class="line"><span class="built_in">String</span>.prototype.replace </div><div class="line"><span class="string">"aabbbbcc"</span>.replace(<span class="regexp">/b+?/</span>, <span class="string">"1"</span>); <span class="comment">//aa1bbbcc</span></div><div class="line"></div><div class="line"><span class="built_in">String</span>.prototype.match</div><div class="line"><span class="string">"aabbbbccbbaa"</span>.match(<span class="regexp">/b+/</span>);</div><div class="line"><span class="comment">//["bbbb", index: 2, input: "aabbbbccbbaa"]</span></div><div class="line"><span class="string">"aabbbbccbbaa"</span>.match(<span class="regexp">/b+/g</span>); </div><div class="line"><span class="comment">//["bbbb", "bb"]</span></div><div class="line"></div><div class="line"><span class="built_in">String</span>.prototype.split</div><div class="line"><span class="string">"aabbbbccbbaa"</span>.split(<span class="regexp">/b+/</span>);</div><div class="line"><span class="comment">// ["aa", "cc", "aa"]</span></div></pre></td></tr></table></figure>
<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> checkLogin = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve,reject</span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> flag = <span class="built_in">document</span>.cookie.indexOf(<span class="string">"userId"</span>)&gt;<span class="number">-1</span>?<span class="literal">true</span>:<span class="literal">false</span>;</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(flag=<span class="literal">true</span>)&#123;</div><div class="line">      resolve(&#123;</div><div class="line">        status:<span class="number">0</span>,</div><div class="line">        result:<span class="literal">true</span></div><div class="line">      &#125;)</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">      reject(<span class="string">"error"</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">let</span> getUserInfo = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</div><div class="line">    <span class="keyword">let</span> userInfo = &#123;</div><div class="line">      userId:<span class="string">"101"</span></div><div class="line">    &#125;</div><div class="line">    resolve(userInfo);</div><div class="line">  &#125;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">checkLogin().then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</div><div class="line">  <span class="keyword">if</span>(res.status==<span class="number">0</span>)&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"login success"</span>);</div><div class="line">    <span class="keyword">return</span> getUserInfo();</div><div class="line">  &#125;</div><div class="line">&#125;).catch(<span class="function">(<span class="params">error</span>)=&gt;</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">`errrs:<span class="subst">$&#123;error&#125;</span>`</span>)</div><div class="line">&#125;).then(<span class="function">(<span class="params">res2</span>)=&gt;</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">`userId:<span class="subst">$&#123;res2.userId&#125;</span>`</span>)</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">Promise</span>.all([checkLogin(),getUserInfo()]).then(<span class="function">(<span class="params">[res1,res2]</span>)=&gt;</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">`result1:<span class="subst">$&#123;res1.result&#125;</span>,result2:<span class="subst">$&#123;res2.userId&#125;</span>`</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          
            <a href="/tags/JS/" rel="tag"># JS</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/01/26/hexo指南/" rel="next" title="hexo指南">
                <i class="fa fa-chevron-left"></i> hexo指南
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
     
       <div id="gitment-container"></div>
     
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars2.githubusercontent.com/u/7248615"
               alt="zhaopan" />
          <p class="site-author-name" itemprop="name">zhaopan</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#数据类型"><span class="nav-number">1.</span> <span class="nav-text">数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6种数据类型"><span class="nav-number">1.1.</span> <span class="nav-text">6种数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#object对象"><span class="nav-number">1.1.1.</span> <span class="nav-text">object对象</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Function"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">Function</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Array"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">Array</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Data"><span class="nav-number">1.1.1.3.</span> <span class="nav-text">Data</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#number"><span class="nav-number">1.1.2.</span> <span class="nav-text">number</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#string"><span class="nav-number">1.1.3.</span> <span class="nav-text">string</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#boolean"><span class="nav-number">1.1.4.</span> <span class="nav-text">boolean</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#null"><span class="nav-number">1.1.5.</span> <span class="nav-text">null</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#undefined"><span class="nav-number">1.1.6.</span> <span class="nav-text">undefined</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#隐式转换"><span class="nav-number">1.2.</span> <span class="nav-text">隐式转换</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#"><span class="nav-number">1.2.1.</span> <span class="nav-text">+/-</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#等于-和-严格等于"><span class="nav-number">1.2.2.</span> <span class="nav-text">等于 == 和 严格等于 ===</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型检测"><span class="nav-number">1.3.</span> <span class="nav-text">类型检测</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#typeof"><span class="nav-number">1.3.1.</span> <span class="nav-text">typeof</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#instanceof"><span class="nav-number">1.3.2.</span> <span class="nav-text">instanceof</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Object-prototype-toString"><span class="nav-number">1.3.3.</span> <span class="nav-text">Object.prototype.toString</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#constructor-NaN"><span class="nav-number">1.3.4.</span> <span class="nav-text">constructor</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#duck-type"><span class="nav-number">1.3.5.</span> <span class="nav-text">duck type</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#运算符"><span class="nav-number">1.4.</span> <span class="nav-text">运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#优先级"><span class="nav-number">1.4.1.</span> <span class="nav-text">优先级</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#delete"><span class="nav-number">1.4.2.</span> <span class="nav-text">delete</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#in"><span class="nav-number">1.4.3.</span> <span class="nav-text">in</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#new"><span class="nav-number">1.4.4.</span> <span class="nav-text">new</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#this"><span class="nav-number">1.4.5.</span> <span class="nav-text">this</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#void"><span class="nav-number">1.4.6.</span> <span class="nav-text">void</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#对象"><span class="nav-number">2.</span> <span class="nav-text">对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#属性"><span class="nav-number">2.1.</span> <span class="nav-text">属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#标签"><span class="nav-number">2.1.1.</span> <span class="nav-text">标签</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#enumerable"><span class="nav-number">2.1.1.1.</span> <span class="nav-text">enumerable</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#configurable-writable"><span class="nav-number">2.1.1.2.</span> <span class="nav-text">configurable/writable</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#value"><span class="nav-number">2.1.1.3.</span> <span class="nav-text">value</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#自定义对象属性"><span class="nav-number">2.1.1.4.</span> <span class="nav-text">自定义对象属性</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#例子"><span class="nav-number">2.1.1.4.1.</span> <span class="nav-text">例子</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除"><span class="nav-number">2.1.2.</span> <span class="nav-text">删除</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#属性检测"><span class="nav-number">2.1.3.</span> <span class="nav-text">属性检测</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#getter-setter方法"><span class="nav-number">2.1.4.</span> <span class="nav-text">getter/setter方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#例子-1"><span class="nav-number">2.1.4.1.</span> <span class="nav-text">例子</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#get-set与原型链结合"><span class="nav-number">2.1.4.2.</span> <span class="nav-text">get/set与原型链结合</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对象标签"><span class="nav-number">2.2.</span> <span class="nav-text">对象标签</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#proto指向原型"><span class="nav-number">2.2.1.</span> <span class="nav-text">proto指向原型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#class"><span class="nav-number">2.2.2.</span> <span class="nav-text">class</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#extensible-seal-freeze"><span class="nav-number">2.2.3.</span> <span class="nav-text">extensible / seal / freeze</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对象创建"><span class="nav-number">2.3.</span> <span class="nav-text">对象创建</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#字面量方式创建"><span class="nav-number">2.3.1.</span> <span class="nav-text">{}字面量方式创建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#new-原型链"><span class="nav-number">2.3.2.</span> <span class="nav-text">new/原型链</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Object-create"><span class="nav-number">2.3.3.</span> <span class="nav-text">Object.create</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#序列化–-JSON-stringify"><span class="nav-number">2.4.</span> <span class="nav-text">序列化– JSON.stringify()</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#toJSON-自定义-序列化"><span class="nav-number">2.4.1.</span> <span class="nav-text">toJSON 自定义-序列化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#valueOf-实现基本类型"><span class="nav-number">2.4.2.</span> <span class="nav-text">valueOf 实现基本类型</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#语句"><span class="nav-number">3.</span> <span class="nav-text">语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#block"><span class="nav-number">3.1.</span> <span class="nav-text">block{}</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for…in"><span class="nav-number">3.2.</span> <span class="nav-text">for…in</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#with"><span class="nav-number">3.3.</span> <span class="nav-text">with</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#严格模式"><span class="nav-number">3.4.</span> <span class="nav-text">严格模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#不允许用with"><span class="nav-number">3.4.1.</span> <span class="nav-text">不允许用with</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#不允许未声明的变量被赋值"><span class="nav-number">3.4.2.</span> <span class="nav-text">不允许未声明的变量被赋值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#arguments变为参数的静态副本"><span class="nav-number">3.4.3.</span> <span class="nav-text">arguments变为参数的静态副本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#delete参数、函数名报错"><span class="nav-number">3.4.4.</span> <span class="nav-text">delete参数、函数名报错</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#delete不可配置的属性报错"><span class="nav-number">3.4.5.</span> <span class="nav-text">delete不可配置的属性报错</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#对象字面量重复属性名报错"><span class="nav-number">3.4.6.</span> <span class="nav-text">对象字面量重复属性名报错</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#禁止八进制字面量"><span class="nav-number">3.4.7.</span> <span class="nav-text">禁止八进制字面量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#eval-arguments变为关键字，不能作为变量、函数名"><span class="nav-number">3.4.8.</span> <span class="nav-text">eval, arguments变为关键字，不能作为变量、函数名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#eval独立作用域"><span class="nav-number">3.4.9.</span> <span class="nav-text">eval独立作用域</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#其他"><span class="nav-number">3.4.10.</span> <span class="nav-text">其他</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数组"><span class="nav-number">4.</span> <span class="nav-text">数组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#数组-VS-一般对象"><span class="nav-number">4.1.</span> <span class="nav-text">数组  VS.  一般对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建-读写"><span class="nav-number">4.2.</span> <span class="nav-text">创建/读写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#动态的增删元素"><span class="nav-number">4.3.</span> <span class="nav-text">动态的增删元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for…in-迭代"><span class="nav-number">4.4.</span> <span class="nav-text">for…in 迭代</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二维数组"><span class="nav-number">4.5.</span> <span class="nav-text">二维数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#稀疏数组"><span class="nav-number">4.6.</span> <span class="nav-text">稀疏数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串和数组"><span class="nav-number">4.7.</span> <span class="nav-text">字符串和数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Array-原型上的方法"><span class="nav-number">4.8.</span> <span class="nav-text">Array 原型上的方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#join"><span class="nav-number">4.8.1.</span> <span class="nav-text">join</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#indexOf-lastIndexOf-数组检索"><span class="nav-number">4.8.2.</span> <span class="nav-text">indexOf / lastIndexOf 数组检索</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#forEach"><span class="nav-number">4.8.3.</span> <span class="nav-text">forEach</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#every-some-数组判断"><span class="nav-number">4.8.4.</span> <span class="nav-text">every / some 数组判断</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#reverse-修改"><span class="nav-number">4.8.5.</span> <span class="nav-text">reverse 修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sort-修改"><span class="nav-number">4.8.6.</span> <span class="nav-text">sort 修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#splice-修改"><span class="nav-number">4.8.7.</span> <span class="nav-text">splice 修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#slice-不修改"><span class="nav-number">4.8.8.</span> <span class="nav-text">slice 不修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#concat-不修改"><span class="nav-number">4.8.9.</span> <span class="nav-text">concat 不修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#filter-不修改"><span class="nav-number">4.8.10.</span> <span class="nav-text">filter 不修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#map-不修改"><span class="nav-number">4.8.11.</span> <span class="nav-text">map 不修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#reduce-reduceRight-不修改"><span class="nav-number">4.8.12.</span> <span class="nav-text">reduce / reduceRight 不修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#isArray-是否为数组"><span class="nav-number">4.8.13.</span> <span class="nav-text">isArray 是否为数组</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#函数"><span class="nav-number">5.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#调用方式"><span class="nav-number">5.1.</span> <span class="nav-text">调用方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数声明与函数表达式"><span class="nav-number">5.2.</span> <span class="nav-text">函数声明与函数表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#this-1"><span class="nav-number">5.3.</span> <span class="nav-text">this</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#全局的this-浏览器"><span class="nav-number">5.3.1.</span> <span class="nav-text">全局的this(浏览器)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#一般函数的this-浏览器"><span class="nav-number">5.3.2.</span> <span class="nav-text">一般函数的this(浏览器)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#作为对象方法的函数的this"><span class="nav-number">5.3.3.</span> <span class="nav-text">作为对象方法的函数的this</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#对象原型链上的this"><span class="nav-number">5.3.4.</span> <span class="nav-text">对象原型链上的this</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#get-set方法与this"><span class="nav-number">5.3.5.</span> <span class="nav-text">get/set方法与this</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#构造器中的this"><span class="nav-number">5.3.6.</span> <span class="nav-text">构造器中的this</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#call-apply方法与this"><span class="nav-number">5.3.7.</span> <span class="nav-text">call/apply方法与this</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bind方法与this"><span class="nav-number">5.3.8.</span> <span class="nav-text">bind方法与this</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数属性-amp-arguments"><span class="nav-number">5.4.</span> <span class="nav-text">函数属性 & arguments</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bind"><span class="nav-number">5.5.</span> <span class="nav-text">bind</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#bind方法"><span class="nav-number">5.5.1.</span> <span class="nav-text">bind方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bind与currying"><span class="nav-number">5.5.2.</span> <span class="nav-text">bind与currying</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bind与new"><span class="nav-number">5.5.3.</span> <span class="nav-text">bind与new</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bind方法模拟"><span class="nav-number">5.5.4.</span> <span class="nav-text">bind方法模拟</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#闭包"><span class="nav-number">5.6.</span> <span class="nav-text">闭包</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#实用例子"><span class="nav-number">5.6.1.</span> <span class="nav-text">实用例子</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#闭包-常见错误之循环闭包"><span class="nav-number">5.6.2.</span> <span class="nav-text">闭包-常见错误之循环闭包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#闭包-封装"><span class="nav-number">5.6.3.</span> <span class="nav-text">闭包-封装</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#作用域"><span class="nav-number">5.7.</span> <span class="nav-text">作用域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ES3执行上下文-Execution-Context"><span class="nav-number">5.8.</span> <span class="nav-text">ES3执行上下文 Execution Context</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#执行上下文与变量对象"><span class="nav-number">5.8.1.</span> <span class="nav-text">执行上下文与变量对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#全局执行上下文"><span class="nav-number">5.8.2.</span> <span class="nav-text">全局执行上下文</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#函数中的激活对象"><span class="nav-number">5.8.3.</span> <span class="nav-text">函数中的激活对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#变量初始化阶段"><span class="nav-number">5.8.4.</span> <span class="nav-text">变量初始化阶段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#代码执行阶段"><span class="nav-number">5.8.5.</span> <span class="nav-text">代码执行阶段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#例子-2"><span class="nav-number">5.8.6.</span> <span class="nav-text">例子</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OOP"><span class="nav-number">6.</span> <span class="nav-text">OOP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#概念与实现继承方式"><span class="nav-number">6.1.</span> <span class="nav-text">概念与实现继承方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基于原型的继承"><span class="nav-number">6.1.1.</span> <span class="nav-text">基于原型的继承</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#prototype属性与原型"><span class="nav-number">6.1.2.</span> <span class="nav-text">prototype属性与原型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#继承实例"><span class="nav-number">6.1.3.</span> <span class="nav-text">继承实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#再谈原型链"><span class="nav-number">6.2.</span> <span class="nav-text">再谈原型链</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#特殊情况"><span class="nav-number">6.2.1.</span> <span class="nav-text">特殊情况</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#prototype属性"><span class="nav-number">6.3.</span> <span class="nav-text">prototype属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#内置构造器的prototype"><span class="nav-number">6.3.1.</span> <span class="nav-text">内置构造器的prototype</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建对象-new-原型链"><span class="nav-number">6.3.2.</span> <span class="nav-text">创建对象-new/原型链</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#instanceof-1"><span class="nav-number">6.4.</span> <span class="nav-text">instanceof</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#OOP精碎"><span class="nav-number">6.5.</span> <span class="nav-text">OOP精碎</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#模拟重载"><span class="nav-number">6.5.1.</span> <span class="nav-text">模拟重载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#调用父类方法和子类重载父类方法"><span class="nav-number">6.5.2.</span> <span class="nav-text">调用父类方法和子类重载父类方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#链式调用"><span class="nav-number">6.5.3.</span> <span class="nav-text">链式调用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#抽象类"><span class="nav-number">6.5.4.</span> <span class="nav-text">抽象类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#defineProperty-ES5"><span class="nav-number">6.5.5.</span> <span class="nav-text">defineProperty(ES5)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#模块化"><span class="nav-number">6.5.6.</span> <span class="nav-text">模块化</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实践（探测器）"><span class="nav-number">6.6.</span> <span class="nav-text">实践（探测器）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#正则与模式匹配"><span class="nav-number">7.</span> <span class="nav-text">正则与模式匹配</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#三个flag"><span class="nav-number">7.1.</span> <span class="nav-text">三个flag</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RegExp对象的属性"><span class="nav-number">7.2.</span> <span class="nav-text">RegExp对象的属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RegExp-对象的方法"><span class="nav-number">7.3.</span> <span class="nav-text">RegExp 对象的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RegExp静态属性"><span class="nav-number">7.4.</span> <span class="nav-text">RegExp静态属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#String类型与正则相关的方法"><span class="nav-number">7.5.</span> <span class="nav-text">String类型与正则相关的方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Promise"><span class="nav-number">8.</span> <span class="nav-text">Promise</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhaopan</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






     
     
     
     
     <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
     <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
     
         <script type="text/javascript">
             var gitment = new Gitment({
                id: document.location.href, 
                 owner: 'kangqiao',
                 repo: 'kangqiao.github.io',
                 oauth: {
                     client_id: '531c962a95bc16bb08b7',
                     client_secret: 'c1c950ff2a48209cb7b3de49ce6430d1266976e9',
                 }});
             gitment.render('gitment-container');
         </script>
     
 

  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

</body>
</html>
